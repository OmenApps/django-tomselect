(()=>{var An=Object.create;var Dt=Object.defineProperty;var Ln=Object.getOwnPropertyDescriptor;var kn=Object.getOwnPropertyNames;var Fn=Object.getPrototypeOf,Mn=Object.prototype.hasOwnProperty;var ft=(a,f)=>()=>(f||a((f={exports:{}}).exports,f),f.exports);var Pn=(a,f,n,s)=>{if(f&&typeof f=="object"||typeof f=="function")for(let o of kn(f))!Mn.call(a,o)&&o!==n&&Dt(a,o,{get:()=>f[o],enumerable:!(s=Ln(f,o))||s.enumerable});return a};var ht=(a,f,n)=>(n=a!=null?An(Fn(a)):{},Pn(f||!a||!a.__esModule?Dt(n,"default",{value:a,enumerable:!0}):n,a));var Vt=ft((nt,Kt)=>{(function(a,f){typeof nt=="object"&&typeof Kt<"u"?f(nt):typeof define=="function"&&define.amd?define(["exports"],f):(a=typeof globalThis<"u"?globalThis:a||self,f(a.sifter={}))})(nt,function(a){"use strict";let f=m=>(m=m.filter(Boolean),m.length<2?m[0]||"":h(m)==1?"["+m.join("")+"]":"(?:"+m.join("|")+")"),n=m=>{if(!o(m))return m.join("");let _="",b=0,g=()=>{b>1&&(_+="{"+b+"}")};return m.forEach((D,x)=>{if(D===m[x-1]){b++;return}g(),_+=D,b=1}),g(),_},s=m=>{let _=w(m);return f(_)},o=m=>new Set(m).size!==m.length,u=m=>(m+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1"),h=m=>m.reduce((_,b)=>Math.max(_,p(b)),0),p=m=>w(m).length,w=m=>Array.from(m);let E=m=>{if(m.length===1)return[[m]];let _=[],b=m.substring(1);return E(b).forEach(function(D){let x=D.slice(0);x[0]=m.charAt(0)+x[0],_.push(x),x=D.slice(0),x.unshift(m.charAt(0)),_.push(x)}),_};let A=[[0,65535]],P="[\u0300-\u036F\xB7\u02BE\u02BC]",H,be,ye=3,T={},he={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let m in he){let _=he[m]||"";for(let b=0;b<_.length;b++){let g=_.substring(b,b+1);T[g]=m}}let X=new RegExp(Object.keys(T).join("|")+"|"+P,"gu"),ae=m=>{H===void 0&&(H=q(m||A))},k=(m,_="NFKD")=>m.normalize(_),ie=m=>w(m).reduce((_,b)=>_+Ie(b),""),Ie=m=>(m=k(m).toLowerCase().replace(X,_=>T[_]||""),k(m,"NFC"));function*Z(m){for(let[_,b]of m)for(let g=_;g<=b;g++){let D=String.fromCharCode(g),x=ie(D);x!=D.toLowerCase()&&(x.length>ye||x.length!=0&&(yield{folded:x,composed:D,code_point:g}))}}let Q=m=>{let _={},b=(g,D)=>{let x=_[g]||new Set,V=new RegExp("^"+s(x)+"$","iu");D.match(V)||(x.add(u(D)),_[g]=x)};for(let g of Z(m))b(g.folded,g.folded),b(g.folded,g.composed);return _},q=m=>{let _=Q(m),b={},g=[];for(let x in _){let V=_[x];V&&(b[x]=s(V)),x.length>1&&g.push(u(x))}g.sort((x,V)=>V.length-x.length);let D=f(g);return be=new RegExp("^"+D,"u"),b},ue=(m,_=1)=>{let b=0;return m=m.map(g=>(H[g]&&(b+=g.length),H[g]||g)),b>=_?n(m):""},re=(m,_=1)=>(_=Math.max(_,m.length-1),f(E(m).map(b=>ue(b,_)))),Se=(m,_=!0)=>{let b=m.length>1?1:0;return f(m.map(g=>{let D=[],x=_?g.length():g.length()-1;for(let V=0;V<x;V++)D.push(re(g.substrs[V]||"",b));return n(D)}))},xe=(m,_)=>{for(let b of _){if(b.start!=m.start||b.end!=m.end||b.substrs.join("")!==m.substrs.join(""))continue;let g=m.parts,D=V=>{for(let Y of g){if(Y.start===V.start&&Y.substr===V.substr)return!1;if(!(V.length==1||Y.length==1)&&(V.start<Y.start&&V.end>Y.start||Y.start<V.start&&Y.end>V.start))return!0}return!1};if(!(b.parts.filter(D).length>0))return!0}return!1};class Ke{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(_){_&&(this.parts.push(_),this.substrs.push(_.substr),this.start=Math.min(_.start,this.start),this.end=Math.max(_.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(_,b){let g=new Ke,D=JSON.parse(JSON.stringify(this.parts)),x=D.pop();for(let G of D)g.add(G);let V=b.substr.substring(0,_-x.start),Y=V.length;return g.add({start:x.start,end:x.start+Y,length:Y,substr:V}),g}}let S=m=>{ae(),m=ie(m);let _="",b=[new Ke];for(let g=0;g<m.length;g++){let x=m.substring(g).match(be),V=m.substring(g,g+1),Y=x?x[0]:null,G=[],R=new Set;for(let B of b){let ee=B.last();if(!ee||ee.length==1||ee.end<=g)if(Y){let Oe=Y.length;B.add({start:g,end:g+Oe,length:Oe,substr:Y}),R.add("1")}else B.add({start:g,end:g+1,length:1,substr:V}),R.add("2");else if(Y){let Oe=B.clone(g,ee),Pe=Y.length;Oe.add({start:g,end:g+Pe,length:Pe,substr:Y}),G.push(Oe)}else R.add("3")}if(G.length>0){G=G.sort((B,ee)=>B.length()-ee.length());for(let B of G)xe(B,b)||b.push(B);continue}if(g>0&&R.size==1&&!R.has("3")){_+=Se(b,!1);let B=new Ke,ee=b[0];ee&&B.add(ee.last()),b=[B]}}return _+=Se(b,!0),_},F=(m,_)=>{if(m)return m[_]},j=(m,_)=>{if(m){for(var b,g=_.split(".");(b=g.shift())&&(m=m[b]););return m}},M=(m,_,b)=>{var g,D;return!m||(m=m+"",_.regex==null)||(D=m.search(_.regex),D===-1)?0:(g=_.string.length/m.length,D===0&&(g+=.5),g*b)},ne=(m,_)=>{var b=m[_];if(typeof b=="function")return b;b&&!Array.isArray(b)&&(m[_]=[b])},z=(m,_)=>{if(Array.isArray(m))m.forEach(_);else for(var b in m)m.hasOwnProperty(b)&&_(m[b],b)},se=(m,_)=>typeof m=="number"&&typeof _=="number"?m>_?1:m<_?-1:0:(m=ie(m+"").toLowerCase(),_=ie(_+"").toLowerCase(),m>_?1:_>m?-1:0);class U{constructor(_,b){this.items=void 0,this.settings=void 0,this.items=_,this.settings=b||{diacritics:!0}}tokenize(_,b,g){if(!_||!_.length)return[];let D=[],x=_.split(/\s+/);var V;return g&&(V=new RegExp("^("+Object.keys(g).map(u).join("|")+"):(.*)$")),x.forEach(Y=>{let G,R=null,B=null;V&&(G=Y.match(V))&&(R=G[1],Y=G[2]),Y.length>0&&(this.settings.diacritics?B=S(Y)||null:B=u(Y),B&&b&&(B="\\b"+B)),D.push({string:Y,regex:B?new RegExp(B,"iu"):null,field:R})}),D}getScoreFunction(_,b){var g=this.prepareSearch(_,b);return this._getScoreFunction(g)}_getScoreFunction(_){let b=_.tokens,g=b.length;if(!g)return function(){return 0};let D=_.options.fields,x=_.weights,V=D.length,Y=_.getAttrFn;if(!V)return function(){return 1};let G=function(){return V===1?function(R,B){let ee=D[0].field;return M(Y(B,ee),R,x[ee]||1)}:function(R,B){var ee=0;if(R.field){let Oe=Y(B,R.field);!R.regex&&Oe?ee+=1/V:ee+=M(Oe,R,1)}else z(x,(Oe,Pe)=>{ee+=M(Y(B,Pe),R,Oe)});return ee/V}}();return g===1?function(R){return G(b[0],R)}:_.options.conjunction==="and"?function(R){var B,ee=0;for(let Oe of b){if(B=G(Oe,R),B<=0)return 0;ee+=B}return ee/g}:function(R){var B=0;return z(b,ee=>{B+=G(ee,R)}),B/g}}getSortFunction(_,b){var g=this.prepareSearch(_,b);return this._getSortFunction(g)}_getSortFunction(_){var b,g=[];let D=this,x=_.options,V=!_.query&&x.sort_empty?x.sort_empty:x.sort;if(typeof V=="function")return V.bind(this);let Y=function(B,ee){return B==="$score"?ee.score:_.getAttrFn(D.items[ee.id],B)};if(V)for(let R of V)(_.query||R.field!=="$score")&&g.push(R);if(_.query){b=!0;for(let R of g)if(R.field==="$score"){b=!1;break}b&&g.unshift({field:"$score",direction:"desc"})}else g=g.filter(R=>R.field!=="$score");return g.length?function(R,B){var ee,Oe;for(let Pe of g)if(Oe=Pe.field,ee=(Pe.direction==="desc"?-1:1)*se(Y(Oe,R),Y(Oe,B)),ee)return ee;return 0}:null}prepareSearch(_,b){let g={};var D=Object.assign({},b);if(ne(D,"sort"),ne(D,"sort_empty"),D.fields){ne(D,"fields");let x=[];D.fields.forEach(V=>{typeof V=="string"&&(V={field:V,weight:1}),x.push(V),g[V.field]="weight"in V?V.weight:1}),D.fields=x}return{options:D,query:_.toLowerCase().trim(),tokens:this.tokenize(_,D.respect_word_boundaries,g),total:0,items:[],weights:g,getAttrFn:D.nesting?j:F}}search(_,b){var g=this,D,x;x=this.prepareSearch(_,b),b=x.options,_=x.query;let V=b.score||g._getScoreFunction(x);_.length?z(g.items,(G,R)=>{D=V(G),(b.filter===!1||D>0)&&x.items.push({score:D,id:R})}):z(g.items,(G,R)=>{x.items.push({score:1,id:R})});let Y=g._getSortFunction(x);return Y&&x.items.sort(Y),x.total=x.items.length,typeof b.limit=="number"&&(x.items=x.items.slice(0,b.limit)),x}}a.Sifter=U,a.cmp=se,a.getAttr=F,a.getAttrNesting=j,a.getPattern=S,a.iterate=z,a.propToArray=ne,a.scoreValue=M,Object.defineProperty(a,"__esModule",{value:!0})})});var vt=ft((st,$t)=>{(function(a,f){typeof st=="object"&&typeof $t<"u"?f(st):typeof define=="function"&&define.amd?define(["exports"],f):(a=typeof globalThis<"u"?globalThis:a||self,f(a.diacritics={}))})(st,function(a){"use strict";let f=S=>(S=S.filter(Boolean),S.length<2?S[0]||"":h(S)==1?"["+S.join("")+"]":"(?:"+S.join("|")+")"),n=S=>{if(!o(S))return S.join("");let F="",j=0,M=()=>{j>1&&(F+="{"+j+"}")};return S.forEach((ne,z)=>{if(ne===S[z-1]){j++;return}M(),F+=ne,j=1}),M(),F},s=S=>{let F=w(S);return f(F)},o=S=>new Set(S).size!==S.length,u=S=>(S+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),h=S=>S.reduce((F,j)=>Math.max(F,p(j)),0),p=S=>w(S).length,w=S=>Array.from(S),E=S=>{if(S.length===1)return[[S]];let F=[],j=S.substring(1);return E(j).forEach(function(ne){let z=ne.slice(0);z[0]=S.charAt(0)+z[0],F.push(z),z=ne.slice(0),z.unshift(S.charAt(0)),F.push(z)}),F},A=[[0,65535]],P="[\u0300-\u036F\xB7\u02BE\u02BC]";a.unicode_map=void 0;let H,be=3,ye={},T={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let S in T){let F=T[S]||"";for(let j=0;j<F.length;j++){let M=F.substring(j,j+1);ye[M]=S}}let he=new RegExp(Object.keys(ye).join("|")+"|"+P,"gu"),X=S=>{a.unicode_map===void 0&&(a.unicode_map=Q(S||A))},ae=(S,F="NFKD")=>S.normalize(F),k=S=>w(S).reduce((F,j)=>F+ie(j),""),ie=S=>(S=ae(S).toLowerCase().replace(he,F=>ye[F]||""),ae(S,"NFC"));function*Ie(S){for(let[F,j]of S)for(let M=F;M<=j;M++){let ne=String.fromCharCode(M),z=k(ne);z!=ne.toLowerCase()&&(z.length>be||z.length!=0&&(yield{folded:z,composed:ne,code_point:M}))}}let Z=S=>{let F={},j=(M,ne)=>{let z=F[M]||new Set,se=new RegExp("^"+s(z)+"$","iu");ne.match(se)||(z.add(u(ne)),F[M]=z)};for(let M of Ie(S))j(M.folded,M.folded),j(M.folded,M.composed);return F},Q=S=>{let F=Z(S),j={},M=[];for(let z in F){let se=F[z];se&&(j[z]=s(se)),z.length>1&&M.push(u(z))}M.sort((z,se)=>se.length-z.length);let ne=f(M);return H=new RegExp("^"+ne,"u"),j},q=(S,F=1)=>{let j=0;return S=S.map(M=>(a.unicode_map[M]&&(j+=M.length),a.unicode_map[M]||M)),j>=F?n(S):""},ue=(S,F=1)=>(F=Math.max(F,S.length-1),f(E(S).map(j=>q(j,F)))),re=(S,F=!0)=>{let j=S.length>1?1:0;return f(S.map(M=>{let ne=[],z=F?M.length():M.length()-1;for(let se=0;se<z;se++)ne.push(ue(M.substrs[se]||"",j));return n(ne)}))},Se=(S,F)=>{for(let j of F){if(j.start!=S.start||j.end!=S.end||j.substrs.join("")!==S.substrs.join(""))continue;let M=S.parts,ne=se=>{for(let U of M){if(U.start===se.start&&U.substr===se.substr)return!1;if(!(se.length==1||U.length==1)&&(se.start<U.start&&se.end>U.start||U.start<se.start&&U.end>se.start))return!0}return!1};if(!(j.parts.filter(ne).length>0))return!0}return!1};class xe{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(F){F&&(this.parts.push(F),this.substrs.push(F.substr),this.start=Math.min(F.start,this.start),this.end=Math.max(F.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(F,j){let M=new xe,ne=JSON.parse(JSON.stringify(this.parts)),z=ne.pop();for(let m of ne)M.add(m);let se=j.substr.substring(0,F-z.start),U=se.length;return M.add({start:z.start,end:z.start+U,length:U,substr:se}),M}}let Ke=S=>{X(),S=k(S);let F="",j=[new xe];for(let M=0;M<S.length;M++){let z=S.substring(M).match(H),se=S.substring(M,M+1),U=z?z[0]:null,m=[],_=new Set;for(let b of j){let g=b.last();if(!g||g.length==1||g.end<=M)if(U){let D=U.length;b.add({start:M,end:M+D,length:D,substr:U}),_.add("1")}else b.add({start:M,end:M+1,length:1,substr:se}),_.add("2");else if(U){let D=b.clone(M,g),x=U.length;D.add({start:M,end:M+x,length:x,substr:U}),m.push(D)}else _.add("3")}if(m.length>0){m=m.sort((b,g)=>b.length()-g.length());for(let b of m)Se(b,j)||j.push(b);continue}if(M>0&&_.size==1&&!_.has("3")){F+=re(j,!1);let b=new xe,g=j[0];g&&b.add(g.last()),j=[b]}}return F+=re(j,!0),F};a._asciifold=ie,a.asciifold=k,a.code_points=A,a.escape_regex=u,a.generateMap=Q,a.generateSets=Z,a.generator=Ie,a.getPattern=Ke,a.initialize=X,a.mapSequence=q,a.normalize=ae,a.substringsToPattern=ue,Object.defineProperty(a,"__esModule",{value:!0})})});var rn=ft((Et,It)=>{(function(a,f){typeof Et=="object"&&typeof It<"u"?It.exports=f():typeof define=="function"&&define.amd?define(f):(a=typeof globalThis<"u"?globalThis:a||self,a.TomSelect=f())})(Et,function(){"use strict";function a(r,e){r.split(/\s+/).forEach(t=>{e(t)})}class f{constructor(){this._events=void 0,this._events={}}on(e,t){a(e,i=>{let l=this._events[i]||[];l.push(t),this._events[i]=l})}off(e,t){var i=arguments.length;if(i===0){this._events={};return}a(e,l=>{if(i===1){delete this._events[l];return}let d=this._events[l];d!==void 0&&(d.splice(d.indexOf(t),1),this._events[l]=d)})}trigger(e,...t){var i=this;a(e,l=>{let d=i._events[l];d!==void 0&&d.forEach(c=>{c.apply(i,t)})})}}function n(r){return r.plugins={},class extends r{constructor(...e){super(...e),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,t){r.plugins[e]={name:e,fn:t}}initializePlugins(e){var t,i;let l=this,d=[];if(Array.isArray(e))e.forEach(c=>{typeof c=="string"?d.push(c):(l.plugins.settings[c.name]=c.options,d.push(c.name))});else if(e)for(t in e)e.hasOwnProperty(t)&&(l.plugins.settings[t]=e[t],d.push(t));for(;i=d.shift();)l.require(i)}loadPlugin(e){var t=this,i=t.plugins,l=r.plugins[e];if(!r.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=l.fn.apply(t,[t.plugins.settings[e]||{}]),i.names.push(e)}require(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]}}}let s=r=>(r=r.filter(Boolean),r.length<2?r[0]||"":w(r)==1?"["+r.join("")+"]":"(?:"+r.join("|")+")"),o=r=>{if(!h(r))return r.join("");let e="",t=0,i=()=>{t>1&&(e+="{"+t+"}")};return r.forEach((l,d)=>{if(l===r[d-1]){t++;return}i(),e+=l,t=1}),i(),e},u=r=>{let e=A(r);return s(e)},h=r=>new Set(r).size!==r.length,p=r=>(r+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),w=r=>r.reduce((e,t)=>Math.max(e,E(t)),0),E=r=>A(r).length,A=r=>Array.from(r);let P=r=>{if(r.length===1)return[[r]];let e=[],t=r.substring(1);return P(t).forEach(function(l){let d=l.slice(0);d[0]=r.charAt(0)+d[0],e.push(d),d=l.slice(0),d.unshift(r.charAt(0)),e.push(d)}),e};let H=[[0,65535]],be="[\u0300-\u036F\xB7\u02BE\u02BC]",ye,T,he=3,X={},ae={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let r in ae){let e=ae[r]||"";for(let t=0;t<e.length;t++){let i=e.substring(t,t+1);X[i]=r}}let k=new RegExp(Object.keys(X).join("|")+"|"+be,"gu"),ie=r=>{ye===void 0&&(ye=re(r||H))},Ie=(r,e="NFKD")=>r.normalize(e),Z=r=>A(r).reduce((e,t)=>e+Q(t),""),Q=r=>(r=Ie(r).toLowerCase().replace(k,e=>X[e]||""),Ie(r,"NFC"));function*q(r){for(let[e,t]of r)for(let i=e;i<=t;i++){let l=String.fromCharCode(i),d=Z(l);d!=l.toLowerCase()&&(d.length>he||d.length!=0&&(yield{folded:d,composed:l,code_point:i}))}}let ue=r=>{let e={},t=(i,l)=>{let d=e[i]||new Set,c=new RegExp("^"+u(d)+"$","iu");l.match(c)||(d.add(p(l)),e[i]=d)};for(let i of q(r))t(i.folded,i.folded),t(i.folded,i.composed);return e},re=r=>{let e=ue(r),t={},i=[];for(let d in e){let c=e[d];c&&(t[d]=u(c)),d.length>1&&i.push(p(d))}i.sort((d,c)=>c.length-d.length);let l=s(i);return T=new RegExp("^"+l,"u"),t},Se=(r,e=1)=>{let t=0;return r=r.map(i=>(ye[i]&&(t+=i.length),ye[i]||i)),t>=e?o(r):""},xe=(r,e=1)=>(e=Math.max(e,r.length-1),s(P(r).map(t=>Se(t,e)))),Ke=(r,e=!0)=>{let t=r.length>1?1:0;return s(r.map(i=>{let l=[],d=e?i.length():i.length()-1;for(let c=0;c<d;c++)l.push(xe(i.substrs[c]||"",t));return o(l)}))},S=(r,e)=>{for(let t of e){if(t.start!=r.start||t.end!=r.end||t.substrs.join("")!==r.substrs.join(""))continue;let i=r.parts,l=c=>{for(let v of i){if(v.start===c.start&&v.substr===c.substr)return!1;if(!(c.length==1||v.length==1)&&(c.start<v.start&&c.end>v.start||v.start<c.start&&v.end>c.start))return!0}return!1};if(!(t.parts.filter(l).length>0))return!0}return!1};class F{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,t){let i=new F,l=JSON.parse(JSON.stringify(this.parts)),d=l.pop();for(let O of l)i.add(O);let c=t.substr.substring(0,e-d.start),v=c.length;return i.add({start:d.start,end:d.start+v,length:v,substr:c}),i}}let j=r=>{ie(),r=Z(r);let e="",t=[new F];for(let i=0;i<r.length;i++){let d=r.substring(i).match(T),c=r.substring(i,i+1),v=d?d[0]:null,O=[],y=new Set;for(let C of t){let I=C.last();if(!I||I.length==1||I.end<=i)if(v){let K=v.length;C.add({start:i,end:i+K,length:K,substr:v}),y.add("1")}else C.add({start:i,end:i+1,length:1,substr:c}),y.add("2");else if(v){let K=C.clone(i,I),me=v.length;K.add({start:i,end:i+me,length:me,substr:v}),O.push(K)}else y.add("3")}if(O.length>0){O=O.sort((C,I)=>C.length()-I.length());for(let C of O)S(C,t)||t.push(C);continue}if(i>0&&y.size==1&&!y.has("3")){e+=Ke(t,!1);let C=new F,I=t[0];I&&C.add(I.last()),t=[C]}}return e+=Ke(t,!0),e};let M=(r,e)=>{if(r)return r[e]},ne=(r,e)=>{if(r){for(var t,i=e.split(".");(t=i.shift())&&(r=r[t]););return r}},z=(r,e,t)=>{var i,l;return!r||(r=r+"",e.regex==null)||(l=r.search(e.regex),l===-1)?0:(i=e.string.length/r.length,l===0&&(i+=.5),i*t)},se=(r,e)=>{var t=r[e];if(typeof t=="function")return t;t&&!Array.isArray(t)&&(r[e]=[t])},U=(r,e)=>{if(Array.isArray(r))r.forEach(e);else for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},m=(r,e)=>typeof r=="number"&&typeof e=="number"?r>e?1:r<e?-1:0:(r=Z(r+"").toLowerCase(),e=Z(e+"").toLowerCase(),r>e?1:e>r?-1:0);class _{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,i){if(!e||!e.length)return[];let l=[],d=e.split(/\s+/);var c;return i&&(c=new RegExp("^("+Object.keys(i).map(p).join("|")+"):(.*)$")),d.forEach(v=>{let O,y=null,C=null;c&&(O=v.match(c))&&(y=O[1],v=O[2]),v.length>0&&(this.settings.diacritics?C=j(v)||null:C=p(v),C&&t&&(C="\\b"+C)),l.push({string:v,regex:C?new RegExp(C,"iu"):null,field:y})}),l}getScoreFunction(e,t){var i=this.prepareSearch(e,t);return this._getScoreFunction(i)}_getScoreFunction(e){let t=e.tokens,i=t.length;if(!i)return function(){return 0};let l=e.options.fields,d=e.weights,c=l.length,v=e.getAttrFn;if(!c)return function(){return 1};let O=function(){return c===1?function(y,C){let I=l[0].field;return z(v(C,I),y,d[I]||1)}:function(y,C){var I=0;if(y.field){let K=v(C,y.field);!y.regex&&K?I+=1/c:I+=z(K,y,1)}else U(d,(K,me)=>{I+=z(v(C,me),y,K)});return I/c}}();return i===1?function(y){return O(t[0],y)}:e.options.conjunction==="and"?function(y){var C,I=0;for(let K of t){if(C=O(K,y),C<=0)return 0;I+=C}return I/i}:function(y){var C=0;return U(t,I=>{C+=O(I,y)}),C/i}}getSortFunction(e,t){var i=this.prepareSearch(e,t);return this._getSortFunction(i)}_getSortFunction(e){var t,i=[];let l=this,d=e.options,c=!e.query&&d.sort_empty?d.sort_empty:d.sort;if(typeof c=="function")return c.bind(this);let v=function(C,I){return C==="$score"?I.score:e.getAttrFn(l.items[I.id],C)};if(c)for(let y of c)(e.query||y.field!=="$score")&&i.push(y);if(e.query){t=!0;for(let y of i)if(y.field==="$score"){t=!1;break}t&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(y=>y.field!=="$score");return i.length?function(y,C){var I,K;for(let me of i)if(K=me.field,I=(me.direction==="desc"?-1:1)*m(v(K,y),v(K,C)),I)return I;return 0}:null}prepareSearch(e,t){let i={};var l=Object.assign({},t);if(se(l,"sort"),se(l,"sort_empty"),l.fields){se(l,"fields");let d=[];l.fields.forEach(c=>{typeof c=="string"&&(c={field:c,weight:1}),d.push(c),i[c.field]="weight"in c?c.weight:1}),l.fields=d}return{options:l,query:e.toLowerCase().trim(),tokens:this.tokenize(e,l.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:l.nesting?ne:M}}search(e,t){var i=this,l,d;d=this.prepareSearch(e,t),t=d.options,e=d.query;let c=t.score||i._getScoreFunction(d);e.length?U(i.items,(O,y)=>{l=c(O),(t.filter===!1||l>0)&&d.items.push({score:l,id:y})}):U(i.items,(O,y)=>{d.items.push({score:1,id:y})});let v=i._getSortFunction(d);return v&&d.items.sort(v),d.total=d.items.length,typeof t.limit=="number"&&(d.items=d.items.slice(0,t.limit)),d}}let b=(r,e)=>{if(Array.isArray(r))r.forEach(e);else for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},g=r=>{if(r.jquery)return r[0];if(r instanceof HTMLElement)return r;if(D(r)){var e=document.createElement("template");return e.innerHTML=r.trim(),e.content.firstChild}return document.querySelector(r)},D=r=>typeof r=="string"&&r.indexOf("<")>-1,x=r=>r.replace(/['"\\]/g,"\\$&"),V=(r,e)=>{var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),r.dispatchEvent(t)},Y=(r,e)=>{Object.assign(r.style,e)},G=(r,...e)=>{var t=B(e);r=ee(r),r.map(i=>{t.map(l=>{i.classList.add(l)})})},R=(r,...e)=>{var t=B(e);r=ee(r),r.map(i=>{t.map(l=>{i.classList.remove(l)})})},B=r=>{var e=[];return b(r,t=>{typeof t=="string"&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},ee=r=>(Array.isArray(r)||(r=[r]),r),Oe=(r,e,t)=>{if(!(t&&!t.contains(r)))for(;r&&r.matches;){if(r.matches(e))return r;r=r.parentNode}},Pe=(r,e=0)=>e>0?r[r.length-1]:r[0],xt=r=>Object.keys(r).length===0,Xe=(r,e)=>{if(!r)return-1;e=e||r.nodeName;for(var t=0;r=r.previousElementSibling;)r.matches(e)&&t++;return t},de=(r,e)=>{b(e,(t,i)=>{t==null?r.removeAttribute(i):r.setAttribute(i,""+t)})},ct=(r,e)=>{r.parentNode&&r.parentNode.replaceChild(e,r)},on=(r,e)=>{if(e===null)return;if(typeof e=="string"){if(!e.length)return;e=new RegExp(e,"i")}let t=d=>{var c=d.data.match(e);if(c&&d.data.length>0){var v=document.createElement("span");v.className="highlight";var O=d.splitText(c.index);O.splitText(c[0].length);var y=O.cloneNode(!0);return v.appendChild(y),ct(O,v),1}return 0},i=d=>{d.nodeType===1&&d.childNodes&&!/(script|style)/i.test(d.tagName)&&(d.className!=="highlight"||d.tagName!=="SPAN")&&Array.from(d.childNodes).forEach(c=>{l(c)})},l=d=>d.nodeType===3?t(d):(i(d),0);l(r)},ln=r=>{var e=r.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(t){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()})},an=65,cn=13,Ct=27,ut=37,un=38,At=39,dn=40,Lt=8,pn=46,dt=9,Ze=(typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent))?"metaKey":"ctrlKey";var kt={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(r){return r.length>0},render:{}};let Me=r=>typeof r>"u"||r===null?null:et(r),et=r=>typeof r=="boolean"?r?"1":"0":r+"",tt=r=>(r+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),fn=(r,e)=>{var t;return function(i,l){var d=this;t&&(d.loading=Math.max(d.loading-1,0),clearTimeout(t)),t=setTimeout(function(){t=null,d.loadedSearches[i]=!0,r.call(d,i,l)},e)}},Ft=(r,e,t)=>{var i,l=r.trigger,d={};r.trigger=function(){var c=arguments[0];if(e.indexOf(c)!==-1)d[c]=arguments;else return l.apply(r,arguments)},t.apply(r,[]),r.trigger=l;for(i of e)i in d&&l.apply(r,d[i])},hn=r=>({start:r.selectionStart||0,length:(r.selectionEnd||0)-(r.selectionStart||0)}),oe=(r,e=!1)=>{r&&(r.preventDefault(),e&&r.stopPropagation())},ge=(r,e,t,i)=>{r.addEventListener(e,t,i)},qe=(r,e)=>{if(!e||!e[r])return!1;var t=(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0);return t===1},pt=(r,e)=>{let t=r.getAttribute("id");return t||(r.setAttribute("id",e),e)},Mt=r=>r.replace(/[\\"']/g,"\\$&"),ze=(r,e)=>{e&&r.append(e)};function Pt(r,e){var t=Object.assign({},kt,e),i=t.dataAttr,l=t.labelField,d=t.valueField,c=t.disabledField,v=t.optgroupField,O=t.optgroupLabelField,y=t.optgroupValueField,C=r.tagName.toLowerCase(),I=r.getAttribute("placeholder")||r.getAttribute("data-placeholder");if(!I&&!t.allowEmptyOption){let we=r.querySelector('option[value=""]');we&&(I=we.textContent)}var K={placeholder:I,options:[],optgroups:[],items:[],maxItems:null},me=()=>{var we,Ce=K.options,pe={},N=1,ve=te=>{var le=Object.assign({},te.dataset),J=i&&le[i];return typeof J=="string"&&J.length&&(le=Object.assign(le,JSON.parse(J))),le},He=(te,le)=>{var J=Me(te.value);if(J!=null&&!(!J&&!t.allowEmptyOption)){if(pe.hasOwnProperty(J)){if(le){var Ae=pe[J][v];Ae?Array.isArray(Ae)?Ae.push(le):pe[J][v]=[Ae,le]:pe[J][v]=le}}else{var fe=ve(te);fe[l]=fe[l]||te.textContent,fe[d]=fe[d]||J,fe[c]=fe[c]||te.disabled,fe[v]=fe[v]||le,fe.$option=te,pe[J]=fe,Ce.push(fe)}te.selected&&K.items.push(J)}},Be=te=>{var le,J;J=ve(te),J[O]=J[O]||te.getAttribute("label")||"",J[y]=J[y]||N++,J[c]=J[c]||te.disabled,K.optgroups.push(J),le=J[y],b(te.children,Ae=>{He(Ae,le)})};K.maxItems=r.hasAttribute("multiple")?null:1,b(r.children,te=>{we=te.tagName.toLowerCase(),we==="optgroup"?Be(te):we==="option"&&He(te)})},L=()=>{let we=r.getAttribute(i);if(we)K.options=JSON.parse(we),b(K.options,pe=>{K.items.push(pe[d])});else{var Ce=r.value.trim()||"";if(!t.allowEmptyOption&&!Ce.length)return;let pe=Ce.split(t.delimiter);b(pe,N=>{let ve={};ve[l]=N,ve[d]=N,K.options.push(ve)}),K.items=pe}};return C==="select"?me():L(),Object.assign({},kt,K,e)}var Ht=0;class Le extends n(f){constructor(e,t){super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],Ht++;var i,l=g(e);if(l.tomselect)throw new Error("Tom Select already initialized on this element");l.tomselect=this;var d=window.getComputedStyle&&window.getComputedStyle(l,null);i=d.getPropertyValue("direction");let c=Pt(l,t);this.settings=c,this.input=l,this.tabIndex=l.tabIndex||0,this.is_select_tag=l.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=pt(l,"tomselect-"+Ht),this.isRequired=l.required,this.sifter=new _(this.options,{diacritics:c.diacritics}),c.mode=c.mode||(c.maxItems===1?"single":"multi"),typeof c.hideSelected!="boolean"&&(c.hideSelected=c.mode==="multi"),typeof c.hidePlaceholder!="boolean"&&(c.hidePlaceholder=c.mode!=="multi");var v=c.createFilter;typeof v!="function"&&(typeof v=="string"&&(v=new RegExp(v)),v instanceof RegExp?c.createFilter=Ce=>v.test(Ce):c.createFilter=Ce=>this.settings.duplicates||!this.options[Ce]),this.initializePlugins(c.plugins),this.setupCallbacks(),this.setupTemplates();let O=g("<div>"),y=g("<div>"),C=this._render("dropdown"),I=g('<div role="listbox" tabindex="-1">'),K=this.input.getAttribute("class")||"",me=c.mode;var L;if(G(O,c.wrapperClass,K,me),G(y,c.controlClass),ze(O,y),G(C,c.dropdownClass,me),c.copyClassesToDropdown&&G(C,K),G(I,c.dropdownContentClass),ze(C,I),g(c.dropdownParent||O).appendChild(C),D(c.controlInput)){L=g(c.controlInput);var we=["autocorrect","autocapitalize","autocomplete"];U(we,Ce=>{l.getAttribute(Ce)&&de(L,{[Ce]:l.getAttribute(Ce)})}),L.tabIndex=-1,y.appendChild(L),this.focus_node=L}else c.controlInput?(L=g(c.controlInput),this.focus_node=L):(L=g("<input/>"),this.focus_node=y);this.wrapper=O,this.dropdown=C,this.dropdown_content=I,this.control=y,this.control_input=L,this.setup()}setup(){let e=this,t=e.settings,i=e.control_input,l=e.dropdown,d=e.dropdown_content,c=e.wrapper,v=e.control,O=e.input,y=e.focus_node,C={passive:!0},I=e.inputId+"-ts-dropdown";de(d,{id:I}),de(y,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":I});let K=pt(y,e.inputId+"-ts-control"),me="label[for='"+x(e.inputId)+"']",L=document.querySelector(me),we=e.focus.bind(e);if(L){ge(L,"click",we),de(L,{for:K});let N=pt(L,e.inputId+"-ts-label");de(y,{"aria-labelledby":N}),de(d,{"aria-labelledby":N})}if(c.style.width=O.style.width,e.plugins.names.length){let N="plugin-"+e.plugins.names.join(" plugin-");G([c,l],N)}(t.maxItems===null||t.maxItems>1)&&e.is_select_tag&&de(O,{multiple:"multiple"}),t.placeholder&&de(i,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+p(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=fn(t.load,t.loadThrottle)),e.control_input.type=O.type,ge(l,"mousemove",()=>{e.ignoreHover=!1}),ge(l,"mouseenter",N=>{var ve=Oe(N.target,"[data-selectable]",l);ve&&e.onOptionHover(N,ve)},{capture:!0}),ge(l,"click",N=>{let ve=Oe(N.target,"[data-selectable]");ve&&(e.onOptionSelect(N,ve),oe(N,!0))}),ge(v,"click",N=>{var ve=Oe(N.target,"[data-ts-item]",v);if(ve&&e.onItemSelect(N,ve)){oe(N,!0);return}i.value==""&&(e.onClick(),oe(N,!0))}),ge(y,"keydown",N=>e.onKeyDown(N)),ge(i,"keypress",N=>e.onKeyPress(N)),ge(i,"input",N=>e.onInput(N)),ge(y,"blur",N=>e.onBlur(N)),ge(y,"focus",N=>e.onFocus(N)),ge(i,"paste",N=>e.onPaste(N));let Ce=N=>{let ve=N.composedPath()[0];if(!c.contains(ve)&&!l.contains(ve)){e.isFocused&&e.blur(),e.inputState();return}ve==i&&e.isOpen?N.stopPropagation():oe(N,!0)},pe=()=>{e.isOpen&&e.positionDropdown()};ge(document,"mousedown",Ce),ge(window,"scroll",pe,C),ge(window,"resize",pe,C),this._destroy=()=>{document.removeEventListener("mousedown",Ce),window.removeEventListener("scroll",pe),window.removeEventListener("resize",pe),L&&L.removeEventListener("click",we)},this.revertSettings={innerHTML:O.innerHTML,tabIndex:O.tabIndex},O.tabIndex=-1,O.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,ge(O,"invalid",()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())}),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,O.disabled?e.disable():e.enable(),e.on("change",this.onChange),G(O,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),t.preload===!0&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),U(t,i=>{this.registerOptionGroup(i)})}setupTemplates(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,l={optgroup:d=>{let c=document.createElement("div");return c.className="optgroup",c.appendChild(d.options),c},optgroup_header:(d,c)=>'<div class="optgroup-header">'+c(d[i])+"</div>",option:(d,c)=>"<div>"+c(d[t])+"</div>",item:(d,c)=>"<div>"+c(d[t])+"</div>",option_create:(d,c)=>'<div class="create">Add <strong>'+c(d.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},l,e.settings.render)}setupCallbacks(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)t=this.settings[i[e]],t&&this.on(e,t)}sync(e=!0){let t=this,i=e?Pt(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(i.options,i.optgroups),t.setValue(i.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0){e.clearActiveItems(),e.focus();return}e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){V(this.input,"input"),V(this.input,"change")}onPaste(e){var t=this;if(t.isInputHidden||t.isLocked){oe(e);return}t.settings.splitOn&&setTimeout(()=>{var i=t.inputValue();if(i.match(t.settings.splitOn)){var l=i.trim().split(t.settings.splitOn);U(l,d=>{Me(d)&&(this.options[d]?t.addItem(d):t.createItem(d))})}},0)}onKeyPress(e){var t=this;if(t.isLocked){oe(e);return}var i=String.fromCharCode(e.keyCode||e.which);if(t.settings.create&&t.settings.mode==="multi"&&i===t.settings.delimiter){t.createItem(),oe(e);return}}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked){e.keyCode!==dt&&oe(e);return}switch(e.keyCode){case an:if(qe(Ze,e)&&t.control_input.value==""){oe(e),t.selectAll();return}break;case Ct:t.isOpen&&(oe(e,!0),t.close()),t.clearActiveItems();return;case dn:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let i=t.getAdjacent(t.activeOption,1);i&&t.setActiveOption(i)}oe(e);return;case un:if(t.activeOption){let i=t.getAdjacent(t.activeOption,-1);i&&t.setActiveOption(i)}oe(e);return;case cn:t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),oe(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&oe(e);return;case ut:t.advanceSelection(-1,e);return;case At:t.advanceSelection(1,e);return;case dt:t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),oe(e)),t.settings.create&&t.createItem()&&oe(e));return;case Lt:case pn:t.deleteSelection(e);return}t.isInputHidden&&!qe(Ze,e)&&oe(e)}onInput(e){var t=this;if(!t.isLocked){var i=t.inputValue();t.lastValue!==i&&(t.lastValue=i,t.settings.shouldLoad.call(t,i)&&t.load(i),t.refreshOptions(),t.trigger("type",i))}}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,i=t.isFocused;if(t.isDisabled){t.blur(),oe(e);return}t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.preload(),i||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(document.hasFocus()!==!1){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var i=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,i):i()}}}onOptionSelect(e,t){var i,l=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?l.createItem(null,()=>{l.settings.closeAfterSelect&&l.close()}):(i=t.dataset.value,typeof i<"u"&&(l.lastQuery=null,l.addItem(i),l.settings.closeAfterSelect&&l.close(),!l.settings.hideSelected&&e.type&&/click/.test(e.type)&&l.setActiveOption(t))))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(oe(e),i.setActiveItem(t,e),!0):!1}canLoad(e){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(e))}load(e){let t=this;if(!t.canLoad(e))return;G(t.wrapper,t.settings.loadingClass),t.loading++;let i=t.loadCallback.bind(t);t.settings.load.call(t,e,i)}loadCallback(e,t){let i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(e,t),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||R(i.wrapper,i.settings.loadingClass),i.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input,i=t.value!==e;i&&(t.value=e,V(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){var i=t?[]:["change"];Ft(this,i,()=>{this.clear(t),this.addItems(e,t)})}setMaxItems(e){e===0&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var i=this,l,d,c,v,O,y;if(i.settings.mode!=="single"){if(!e){i.clearActiveItems(),i.isFocused&&i.showInput();return}if(l=t&&t.type.toLowerCase(),l==="click"&&qe("shiftKey",t)&&i.activeItems.length){for(y=i.getLastActive(),c=Array.prototype.indexOf.call(i.control.children,y),v=Array.prototype.indexOf.call(i.control.children,e),c>v&&(O=c,c=v,v=O),d=c;d<=v;d++)e=i.control.children[d],i.activeItems.indexOf(e)===-1&&i.setActiveItemClass(e);oe(t)}else l==="click"&&qe(Ze,t)||l==="keydown"&&qe("shiftKey",t)?e.classList.contains("active")?i.removeActiveItem(e):i.setActiveItemClass(e):(i.clearActiveItems(),i.setActiveItemClass(e));i.hideInput(),i.isFocused||i.focus()}}setActiveItemClass(e){let t=this,i=t.control.querySelector(".last-active");i&&R(i,"last-active"),G(e,"active last-active"),t.trigger("item_select",e),t.activeItems.indexOf(e)==-1&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),R(e,"active")}clearActiveItems(){R(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,de(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),de(e,{"aria-selected":"true"}),G(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;let i=this.dropdown_content,l=i.clientHeight,d=i.scrollTop||0,c=e.offsetHeight,v=e.getBoundingClientRect().top-i.getBoundingClientRect().top+d;v+c>l+d?this.scroll(v-l+c,t):v<d&&this.scroll(v,t)}scroll(e,t){let i=this.dropdown_content;t&&(i.style.scrollBehavior=t),i.scrollTop=e,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(R(this.activeOption,"active"),de(this.activeOption,{"aria-selected":null})),this.activeOption=null,de(this.focus_node,{"aria-activedescendant":null})}selectAll(){let e=this;if(e.settings.mode==="single")return;let t=e.controlChildren();t.length&&(e.hideInput(),e.close(),e.activeItems=t,U(t,i=>{e.setActiveItemClass(i)}))}inputState(){var e=this;e.control.contains(e.control_input)&&(de(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&de(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout(()=>{e.ignoreFocus=!1,e.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return typeof e.sortField=="string"&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,i,l=this,d=this.getSearchOptions();if(l.settings.score&&(i=l.settings.score.call(l,e),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==l.lastQuery?(l.lastQuery=e,t=l.sifter.search(e,Object.assign(d,{score:i})),l.currentResults=t):t=Object.assign({},l.currentResults),l.settings.hideSelected&&(t.items=t.items.filter(c=>{let v=Me(c.id);return!(v&&l.items.indexOf(v)!==-1)})),t}refreshOptions(e=!0){var t,i,l,d,c,v,O,y,C,I;let K={},me=[];var L=this,we=L.inputValue();let Ce=we===L.lastQuery||we==""&&L.lastQuery==null;var pe=L.search(we),N=null,ve=L.settings.shouldOpen||!1,He=L.dropdown_content;for(Ce&&(N=L.activeOption,N&&(C=N.closest("[data-group]"))),d=pe.items.length,typeof L.settings.maxOptions=="number"&&(d=Math.min(d,L.settings.maxOptions)),d>0&&(ve=!0),t=0;t<d;t++){let te=pe.items[t];if(!te)continue;let le=te.id,J=L.options[le];if(J===void 0)continue;let Ae=et(le),fe=L.getOption(Ae,!0);for(L.settings.hideSelected||fe.classList.toggle("selected",L.items.includes(Ae)),c=J[L.settings.optgroupField]||"",v=Array.isArray(c)?c:[c],i=0,l=v&&v.length;i<l;i++){c=v[i],L.optgroups.hasOwnProperty(c)||(c="");let $e=K[c];$e===void 0&&($e=document.createDocumentFragment(),me.push(c)),i>0&&(fe=fe.cloneNode(!0),de(fe,{id:J.$id+"-clone-"+i,"aria-selected":null}),fe.classList.add("ts-cloned"),R(fe,"active"),L.activeOption&&L.activeOption.dataset.value==le&&C&&C.dataset.group===c.toString()&&(N=fe)),$e.appendChild(fe),K[c]=$e}}L.settings.lockOptgroupOrder&&me.sort((te,le)=>{let J=L.optgroups[te],Ae=L.optgroups[le],fe=J&&J.$order||0,$e=Ae&&Ae.$order||0;return fe-$e}),O=document.createDocumentFragment(),U(me,te=>{let le=K[te];if(!le||!le.children.length)return;let J=L.optgroups[te];if(J!==void 0){let Ae=document.createDocumentFragment(),fe=L.render("optgroup_header",J);ze(Ae,fe),ze(Ae,le);let $e=L.render("optgroup",{group:J,options:Ae});ze(O,$e)}else ze(O,le)}),He.innerHTML="",ze(He,O),L.settings.highlight&&(ln(He),pe.query.length&&pe.tokens.length&&U(pe.tokens,te=>{on(He,te.regex)}));var Be=te=>{let le=L.render(te,{input:we});return le&&(ve=!0,He.insertBefore(le,He.firstChild)),le};if(L.loading?Be("loading"):L.settings.shouldLoad.call(L,we)?pe.items.length===0&&Be("no_results"):Be("not_loading"),y=L.canCreate(we),y&&(I=Be("option_create")),L.hasOptions=pe.items.length>0||y,ve){if(pe.items.length>0){if(!N&&L.settings.mode==="single"&&L.items[0]!=null&&(N=L.getOption(L.items[0])),!He.contains(N)){let te=0;I&&!L.settings.addPrecedence&&(te=1),N=L.selectable()[te]}}else I&&(N=I);e&&!L.isOpen&&(L.open(),L.scrollToOption(N,"auto")),L.setActiveOption(N)}else L.clearActiveOption(),e&&L.isOpen&&L.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){let i=this;if(Array.isArray(e))return i.addOptions(e,t),!1;let l=Me(e[i.settings.valueField]);return l===null||i.options.hasOwnProperty(l)?!1:(e.$order=e.$order||++i.order,e.$id=i.inputId+"-opt-"+e.$order,i.options[l]=e,i.lastQuery=null,t&&(i.userOptions[l]=t,i.trigger("option_add",l,e)),l)}addOptions(e,t=!1){U(e,i=>{this.addOption(i,t)})}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=Me(e[this.settings.optgroupValueField]);return t===null?!1:(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var i;t[this.settings.optgroupValueField]=e,(i=this.registerOptionGroup(t))&&this.trigger("optgroup_add",i,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){let i=this;var l,d;let c=Me(e),v=Me(t[i.settings.valueField]);if(c===null)return;let O=i.options[c];if(O==null)return;if(typeof v!="string")throw new Error("Value must be set in option data");let y=i.getOption(c),C=i.getItem(c);if(t.$order=t.$order||O.$order,delete i.options[c],i.uncacheValue(v),i.options[v]=t,y){if(i.dropdown_content.contains(y)){let I=i._render("option",t);ct(y,I),i.activeOption===y&&i.setActiveOption(I)}y.remove()}C&&(d=i.items.indexOf(c),d!==-1&&i.items.splice(d,1,v),l=i._render("item",t),C.classList.contains("active")&&G(l,"active"),ct(C,l)),i.lastQuery=null}removeOption(e,t){let i=this;e=et(e),i.uncacheValue(e),delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)}clearOptions(e){let t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};U(this.options,(l,d)=>{t(l,d)&&(i[d]=l)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){let i=Me(e);if(i===null)return null;let l=this.options[i];if(l!=null){if(l.$div)return l.$div;if(t)return this._render("option",l)}return null}getAdjacent(e,t,i="option"){var l=this,d;if(!e)return null;i=="item"?d=l.controlChildren():d=l.dropdown_content.querySelectorAll("[data-selectable]");for(let c=0;c<d.length;c++)if(d[c]==e)return t>0?d[c+1]:d[c-1];return null}getItem(e){if(typeof e=="object")return e;var t=Me(e);return t!==null?this.control.querySelector(`[data-value="${Mt(t)}"]`):null}addItems(e,t){var i=this,l=Array.isArray(e)?e:[e];l=l.filter(c=>i.items.indexOf(c)===-1);let d=l[l.length-1];l.forEach(c=>{i.isPending=c!==d,i.addItem(c,t)})}addItem(e,t){var i=t?[]:["change","dropdown_close"];Ft(this,i,()=>{var l,d;let c=this,v=c.settings.mode,O=Me(e);if(!(O&&c.items.indexOf(O)!==-1&&(v==="single"&&c.close(),v==="single"||!c.settings.duplicates))&&!(O===null||!c.options.hasOwnProperty(O))&&(v==="single"&&c.clear(t),!(v==="multi"&&c.isFull()))){if(l=c._render("item",c.options[O]),c.control.contains(l)&&(l=l.cloneNode(!0)),d=c.isFull(),c.items.splice(c.caretPos,0,O),c.insertAtCaret(l),c.isSetup){if(!c.isPending&&c.settings.hideSelected){let y=c.getOption(O),C=c.getAdjacent(y,1);C&&c.setActiveOption(C)}!c.isPending&&!c.settings.closeAfterSelect&&c.refreshOptions(c.isFocused&&v!=="single"),c.settings.closeAfterSelect!=!1&&c.isFull()?c.close():c.isPending||c.positionDropdown(),c.trigger("item_add",O,l),c.isPending||c.updateOriginalInput({silent:t})}(!c.isPending||!d&&c.isFull())&&(c.inputState(),c.refreshState())}})}removeItem(e=null,t){let i=this;if(e=i.getItem(e),!e)return;var l,d;let c=e.dataset.value;l=Xe(e),e.remove(),e.classList.contains("active")&&(d=i.activeItems.indexOf(e),i.activeItems.splice(d,1),R(e,"active")),i.items.splice(l,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(c)&&i.removeOption(c,t),l<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:t}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",c,e)}createItem(e=null,t=()=>{}){arguments.length===3&&(t=arguments[2]),typeof t!="function"&&(t=()=>{});var i=this,l=i.caretPos,d;if(e=e||i.inputValue(),!i.canCreate(e))return t(),!1;i.lock();var c=!1,v=O=>{if(i.unlock(),!O||typeof O!="object")return t();var y=Me(O[i.settings.valueField]);if(typeof y!="string")return t();i.setTextboxValue(),i.addOption(O,!0),i.setCaret(l),i.addItem(y),t(O),c=!0};return typeof i.settings.create=="function"?d=i.settings.create.call(this,e,v):d={[i.settings.labelField]:e,[i.settings.valueField]:e},c||v(d),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){let e=this;e.refreshValidityState();let t=e.isFull(),i=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);let l=e.wrapper.classList;l.toggle("focus",e.isFocused),l.toggle("disabled",e.isDisabled),l.toggle("required",e.isRequired),l.toggle("invalid",!e.isValid),l.toggle("locked",i),l.toggle("full",t),l.toggle("input-active",e.isFocused&&!e.isInputHidden),l.toggle("dropdown-active",e.isOpen),l.toggle("has-options",xt(e.options)),l.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){let t=this;var i,l;let d=t.input.querySelector('option[value=""]');if(t.is_select_tag){let O=function(y,C,I){return y||(y=g('<option value="'+tt(C)+'">'+tt(I)+"</option>")),y!=d&&t.input.append(y),c.push(y),(y!=d||v>0)&&(y.selected=!0),y},c=[],v=t.input.querySelectorAll("option:checked").length;t.input.querySelectorAll("option:checked").forEach(y=>{y.selected=!1}),t.items.length==0&&t.settings.mode=="single"?O(d,"",""):t.items.forEach(y=>{if(i=t.options[y],l=i[t.settings.labelField]||"",c.includes(i.$option)){let C=t.input.querySelector(`option[value="${Mt(y)}"]:not(:checked)`);O(C,y,l)}else i.$option=O(i.$option,y,l)})}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.isOpen=!0,de(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),Y(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),Y(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,i=t.isOpen;e&&(t.setTextboxValue(),t.settings.mode==="single"&&t.items.length&&t.hideInput()),t.isOpen=!1,de(t.focus_node,{"aria-expanded":"false"}),Y(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),i&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var e=this.control,t=e.getBoundingClientRect(),i=e.offsetHeight+t.top+window.scrollY,l=t.left+window.scrollX;Y(this.dropdown,{width:t.width+"px",top:i+"px",left:l+"px"})}}clear(e){var t=this;if(t.items.length){var i=t.controlChildren();U(i,l=>{t.removeItem(l,!0)}),t.showInput(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){let t=this,i=t.caretPos,l=t.control;l.insertBefore(e,l.children[i]||null),t.setCaret(i+1)}deleteSelection(e){var t,i,l,d,c=this;t=e&&e.keyCode===Lt?-1:1,i=hn(c.control_input);let v=[];if(c.activeItems.length)d=Pe(c.activeItems,t),l=Xe(d),t>0&&l++,U(c.activeItems,O=>v.push(O));else if((c.isFocused||c.settings.mode==="single")&&c.items.length){let O=c.controlChildren(),y;t<0&&i.start===0&&i.length===0?y=O[c.caretPos-1]:t>0&&i.start===c.inputValue().length&&(y=O[c.caretPos]),y!==void 0&&v.push(y)}if(!c.shouldDelete(v,e))return!1;for(oe(e,!0),typeof l<"u"&&c.setCaret(l);v.length;)c.removeItem(v.pop());return c.showInput(),c.positionDropdown(),c.refreshOptions(!1),!0}shouldDelete(e,t){let i=e.map(l=>l.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,t)===!1)}advanceSelection(e,t){var i,l,d=this;d.rtl&&(e*=-1),!d.inputValue().length&&(qe(Ze,t)||qe("shiftKey",t)?(i=d.getLastActive(e),i?i.classList.contains("active")?l=d.getAdjacent(i,e,"item"):l=i:e>0?l=d.control_input.nextElementSibling:l=d.control_input.previousElementSibling,l&&(l.classList.contains("active")&&d.removeActiveItem(i),d.setActiveItemClass(l))):d.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var i=this.control.querySelectorAll(".active");if(i)return Pe(i,e)}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.focus_node.tabIndex=-1,e.isDisabled=!0,this.close(),e.lock()}enable(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.focus_node.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,R(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){var i,l;let d=this;if(typeof this.settings.render[e]!="function"||(l=d.settings.render[e].call(this,t,tt),!l))return null;if(l=g(l),e==="option"||e==="option_create"?t[d.settings.disabledField]?de(l,{"aria-disabled":"true"}):de(l,{"data-selectable":""}):e==="optgroup"&&(i=t.group[d.settings.optgroupValueField],de(l,{"data-group":i}),t.group[d.settings.disabledField]&&de(l,{"data-disabled":""})),e==="option"||e==="item"){let c=et(t[d.settings.valueField]);de(l,{"data-value":c}),e==="item"?(G(l,d.settings.itemClass),de(l,{"data-ts-item":""})):(G(l,d.settings.optionClass),de(l,{role:"option",id:t.$id}),t.$div=l,d.options[c]=t)}return l}_render(e,t){let i=this.render(e,t);if(i==null)throw"HTMLElement expected";return i}clearCache(){U(this.options,e=>{e.$div&&(e.$div.remove(),delete e.$div)})}uncacheValue(e){let t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,i){var l=this,d=l[t];l[t]=function(){var c,v;return e==="after"&&(c=d.apply(l,arguments)),v=i.apply(l,arguments),e==="instead"?v:(e==="before"&&(c=d.apply(l,arguments)),c)}}}function gn(){ge(this.input,"change",()=>{this.sync()})}function mn(){var r=this,e=r.onOptionSelect;r.settings.hideSelected=!1;var t=function(l){setTimeout(()=>{var d=l.querySelector("input");d instanceof HTMLInputElement&&(l.classList.contains("selected")?d.checked=!0:d.checked=!1)},1)};r.hook("after","setupTemplates",()=>{var i=r.settings.render.option;r.settings.render.option=(l,d)=>{var c=g(i.call(r,l,d)),v=document.createElement("input");v.addEventListener("click",function(y){oe(y)}),v.type="checkbox";let O=Me(l[r.settings.valueField]);return O&&r.items.indexOf(O)>-1&&(v.checked=!0),c.prepend(v),c}}),r.on("item_remove",i=>{var l=r.getOption(i);l&&(l.classList.remove("selected"),t(l))}),r.on("item_add",i=>{var l=r.getOption(i);l&&t(l)}),r.hook("instead","onOptionSelect",(i,l)=>{if(l.classList.contains("selected")){l.classList.remove("selected"),r.removeItem(l.dataset.value),r.refreshOptions(),oe(i,!0);return}e.call(r,i,l),t(l)})}function vn(r){let e=this,t=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},r);e.on("initialize",()=>{var i=g(t.html(t));i.addEventListener("click",l=>{e.isDisabled||(e.clear(),e.settings.mode==="single"&&e.settings.allowEmptyOption&&e.addItem(""),l.preventDefault(),l.stopPropagation())}),e.control.appendChild(i)})}function _n(){var r=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(r.settings.mode==="multi"){var e=r.lock,t=r.unlock;r.hook("instead","lock",()=>{var i=$(r.control).data("sortable");return i&&i.disable(),e.call(r)}),r.hook("instead","unlock",()=>{var i=$(r.control).data("sortable");return i&&i.enable(),t.call(r)}),r.on("initialize",()=>{var i=$(r.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:r.isLocked,start:(l,d)=>{d.placeholder.css("width",d.helper.css("width")),i.css({overflow:"visible"})},stop:()=>{i.css({overflow:"hidden"});var l=[];i.children("[data-value]").each(function(){this.dataset.value&&l.push(this.dataset.value)}),r.setValue(l)}})})}}function bn(r){let e=this,t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},r);e.on("initialize",()=>{var i=g(t.html(t)),l=i.querySelector("."+t.closeClass);l&&l.addEventListener("click",d=>{oe(d,!0),e.close()}),e.dropdown.insertBefore(i,e.dropdown.firstChild)})}function yn(){var r=this;r.hook("instead","setCaret",e=>{r.settings.mode==="single"||!r.control.contains(r.control_input)?e=r.items.length:(e=Math.max(0,Math.min(r.items.length,e)),e!=r.caretPos&&!r.isPending&&r.controlChildren().forEach((t,i)=>{i<e?r.control_input.insertAdjacentElement("beforebegin",t):r.control.appendChild(t)})),r.caretPos=e}),r.hook("instead","moveCaret",e=>{if(!r.isFocused)return;let t=r.getLastActive(e);if(t){let i=Xe(t);r.setCaret(e>0?i+1:i),r.setActiveItem(),R(t,"last-active")}else r.setCaret(r.caretPos+e)})}function On(){let r=this;r.settings.shouldOpen=!0,r.hook("before","setup",()=>{r.focus_node=r.control,G(r.control_input,"dropdown-input");let e=g('<div class="dropdown-input-wrap">');e.append(r.control_input),r.dropdown.insertBefore(e,r.dropdown.firstChild);let t=g('<input class="items-placeholder" tabindex="-1" />');t.placeholder=r.settings.placeholder||"",r.control.append(t)}),r.on("initialize",()=>{r.control_input.addEventListener("keydown",t=>{switch(t.keyCode){case Ct:r.isOpen&&(oe(t,!0),r.close()),r.clearActiveItems();return;case dt:r.focus_node.tabIndex=-1;break}return r.onKeyDown.call(r,t)}),r.on("blur",()=>{r.focus_node.tabIndex=r.isDisabled?-1:r.tabIndex}),r.on("dropdown_open",()=>{r.control_input.focus()});let e=r.onBlur;r.hook("instead","onBlur",t=>{if(!(t&&t.relatedTarget==r.control_input))return e.call(r)}),ge(r.control_input,"blur",()=>r.onBlur()),r.hook("before","close",()=>{r.isOpen&&r.focus_node.focus({preventScroll:!0})})})}function wn(){var r=this;r.on("initialize",()=>{var e=document.createElement("span"),t=r.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",r.wrapper.appendChild(e);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(let d of i)e.style[d]=t.style[d];var l=()=>{e.textContent=t.value,t.style.width=e.clientWidth+"px"};l(),r.on("update item_add item_remove",l),ge(t,"input",l),ge(t,"keyup",l),ge(t,"blur",l),ge(t,"update",l)})}function Tn(){var r=this,e=r.deleteSelection;this.hook("instead","deleteSelection",t=>r.activeItems.length?e.call(r,t):!1)}function Sn(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}function En(){var r=this,e=r.onKeyDown;r.hook("instead","onKeyDown",t=>{var i,l,d,c;if(!r.isOpen||!(t.keyCode===ut||t.keyCode===At))return e.call(r,t);r.ignoreHover=!0,c=Oe(r.activeOption,"[data-group]"),i=Xe(r.activeOption,"[data-selectable]"),c&&(t.keyCode===ut?c=c.previousSibling:c=c.nextSibling,c&&(d=c.querySelectorAll("[data-selectable]"),l=d[Math.min(d.length-1,i)],l&&r.setActiveOption(l)))})}function In(r){let e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},r);var t=this;if(e.append){var i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+tt(e.title)+'">'+e.label+"</a>";t.hook("after","setupTemplates",()=>{var l=t.settings.render.item;t.settings.render.item=(d,c)=>{var v=g(l.call(t,d,c)),O=g(i);return v.appendChild(O),ge(O,"mousedown",y=>{oe(y,!0)}),ge(O,"click",y=>{oe(y,!0),!t.isLocked&&t.shouldDelete([v],y)&&(t.removeItem(v),t.refreshOptions(!1),t.inputState())}),v}})}}function xn(r){let e=this,t=Object.assign({text:i=>i[e.settings.labelField]},r);e.on("item_remove",function(i){if(e.isFocused&&e.control_input.value.trim()===""){var l=e.options[i];l&&e.setTextboxValue(t.text.call(e,l))}})}function Cn(){let r=this,e=r.canLoad,t=r.clearActiveOption,i=r.loadCallback;var l={},d,c=!1,v,O=[];if(r.settings.shouldLoadMore||(r.settings.shouldLoadMore=()=>{if(d.clientHeight/(d.scrollHeight-d.scrollTop)>.9)return!0;if(r.activeOption){var K=r.selectable(),me=Array.from(K).indexOf(r.activeOption);if(me>=K.length-2)return!0}return!1}),!r.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";r.settings.sortField=[{field:"$order"},{field:"$score"}];let y=I=>typeof r.settings.maxOptions=="number"&&d.children.length>=r.settings.maxOptions?!1:!!(I in l&&l[I]),C=(I,K)=>r.items.indexOf(K)>=0||O.indexOf(K)>=0;r.setNextUrl=(I,K)=>{l[I]=K},r.getUrl=I=>{if(I in l){let K=l[I];return l[I]=!1,K}return l={},r.settings.firstUrl.call(r,I)},r.hook("instead","clearActiveOption",()=>{if(!c)return t.call(r)}),r.hook("instead","canLoad",I=>I in l?y(I):e.call(r,I)),r.hook("instead","loadCallback",(I,K)=>{if(!c)r.clearOptions(C);else if(v){let me=I[0];me!==void 0&&(v.dataset.value=me[r.settings.valueField])}i.call(r,I,K),c=!1}),r.hook("after","refreshOptions",()=>{let I=r.lastValue;var K;y(I)?(K=r.render("loading_more",{query:I}),K&&(K.setAttribute("data-selectable",""),v=K)):I in l&&!d.querySelector(".no-results")&&(K=r.render("no_more_results",{query:I})),K&&(G(K,r.settings.optionClass),d.append(K))}),r.on("initialize",()=>{O=Object.keys(r.options),d=r.dropdown_content,r.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},r.settings.render),d.addEventListener("scroll",()=>{r.settings.shouldLoadMore.call(r)&&y(r.lastValue)&&(c||(c=!0,r.load.call(r,r.lastValue)))})})}return Le.define("change_listener",gn),Le.define("checkbox_options",mn),Le.define("clear_button",vn),Le.define("drag_drop",_n),Le.define("dropdown_header",bn),Le.define("caret_position",yn),Le.define("dropdown_input",On),Le.define("input_autogrow",wn),Le.define("no_backspace_delete",Tn),Le.define("no_active_items",Sn),Le.define("optgroup_columns",En),Le.define("remove_button",In),Le.define("restore_on_backspace",xn),Le.define("virtual_scroll",Cn),Le})});function gt(a,f){a.split(/\s+/).forEach(n=>{f(n)})}var Qe=class{constructor(){this._events={}}on(f,n){gt(f,s=>{let o=this._events[s]||[];o.push(n),this._events[s]=o})}off(f,n){var s=arguments.length;if(s===0){this._events={};return}gt(f,o=>{if(s===1){delete this._events[o];return}let u=this._events[o];u!==void 0&&(u.splice(u.indexOf(n),1),this._events[o]=u)})}trigger(f,...n){var s=this;gt(f,o=>{let u=s._events[o];u!==void 0&&u.forEach(h=>{h.apply(s,n)})})}};function mt(a){return a.plugins={},class extends a{constructor(){super(...arguments);this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(n,s){a.plugins[n]={name:n,fn:s}}initializePlugins(n){var s,o;let u=this,h=[];if(Array.isArray(n))n.forEach(p=>{typeof p=="string"?h.push(p):(u.plugins.settings[p.name]=p.options,h.push(p.name))});else if(n)for(s in n)n.hasOwnProperty(s)&&(u.plugins.settings[s]=n[s],h.push(s));for(;o=h.shift();)u.require(o)}loadPlugin(n){var s=this,o=s.plugins,u=a.plugins[n];if(!a.plugins.hasOwnProperty(n))throw new Error('Unable to find "'+n+'" plugin');o.requested[n]=!0,o.loaded[n]=u.fn.apply(s,[s.plugins.settings[n]||{}]),o.names.push(n)}require(n){var s=this,o=s.plugins;if(!s.plugins.loaded.hasOwnProperty(n)){if(o.requested[n])throw new Error('Plugin has circular dependency ("'+n+'")');s.loadPlugin(n)}return o.loaded[n]}}}var Fe=ht(Vt()),Wt=ht(vt());var Hn=ht(vt());var je=(a,f)=>{if(Array.isArray(a))a.forEach(f);else for(var n in a)a.hasOwnProperty(n)&&f(a[n],n)};var _e=a=>{if(a.jquery)return a[0];if(a instanceof HTMLElement)return a;if(_t(a)){var f=document.createElement("template");return f.innerHTML=a.trim(),f.content.firstChild}return document.querySelector(a)},_t=a=>typeof a=="string"&&a.indexOf("<")>-1,jt=a=>a.replace(/['"\\]/g,"\\$&"),it=(a,f)=>{var n=document.createEvent("HTMLEvents");n.initEvent(f,!0,!1),a.dispatchEvent(n)},Ue=(a,f)=>{Object.assign(a.style,f)},Ee=(a,...f)=>{var n=Nt(f);a=Rt(a),a.map(s=>{n.map(o=>{s.classList.add(o)})})},Ve=(a,...f)=>{var n=Nt(f);a=Rt(a),a.map(s=>{n.map(o=>{s.classList.remove(o)})})},Nt=a=>{var f=[];return je(a,n=>{typeof n=="string"&&(n=n.trim().split(/[\11\12\14\15\40]/)),Array.isArray(n)&&(f=f.concat(n))}),f.filter(Boolean)},Rt=a=>(Array.isArray(a)||(a=[a]),a),rt=(a,f,n)=>{if(!(n&&!n.contains(a)))for(;a&&a.matches;){if(a.matches(f))return a;a=a.parentNode}},bt=(a,f=0)=>f>0?a[a.length-1]:a[0],qt=a=>Object.keys(a).length===0,yt=(a,f)=>{if(!a)return-1;f=f||a.nodeName;for(var n=0;a=a.previousElementSibling;)a.matches(f)&&n++;return n},ce=(a,f)=>{je(f,(n,s)=>{n==null?a.removeAttribute(s):a.setAttribute(s,""+n)})},Ge=(a,f)=>{a.parentNode&&a.parentNode.replaceChild(f,a)};var zt=(a,f)=>{if(f===null)return;if(typeof f=="string"){if(!f.length)return;f=new RegExp(f,"i")}let n=u=>{var h=u.data.match(f);if(h&&u.data.length>0){var p=document.createElement("span");p.className="highlight";var w=u.splitText(h.index);w.splitText(h[0].length);var E=w.cloneNode(!0);return p.appendChild(E),Ge(w,p),1}return 0},s=u=>{u.nodeType===1&&u.childNodes&&!/(script|style)/i.test(u.tagName)&&(u.className!=="highlight"||u.tagName!=="SPAN")&&Array.from(u.childNodes).forEach(h=>{o(h)})},o=u=>u.nodeType===3?n(u):(s(u),0);o(a)},Bt=a=>{var f=a.querySelectorAll("span.highlight");Array.prototype.forEach.call(f,function(n){var s=n.parentNode;s.replaceChild(n.firstChild,n),s.normalize()})};var Dn=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Je=Dn?"metaKey":"ctrlKey";var Ot={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(a){return a.length>0},render:{}};var ke=a=>typeof a>"u"||a===null?null:We(a),We=a=>typeof a=="boolean"?a?"1":"0":a+"",Ye=a=>(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Qt=(a,f)=>{var n;return function(s,o){var u=this;n&&(u.loading=Math.max(u.loading-1,0),clearTimeout(n)),n=setTimeout(function(){n=null,u.loadedSearches[s]=!0,a.call(u,s,o)},f)}},wt=(a,f,n)=>{var s,o=a.trigger,u={};a.trigger=function(){var h=arguments[0];if(f.indexOf(h)!==-1)u[h]=arguments;else return o.apply(a,arguments)},n.apply(a,[]),a.trigger=o;for(s of f)s in u&&o.apply(a,u[s])},Ut=a=>({start:a.selectionStart||0,length:(a.selectionEnd||0)-(a.selectionStart||0)}),W=(a,f=!1)=>{a&&(a.preventDefault(),f&&a.stopPropagation())},Te=(a,f,n,s)=>{a.addEventListener(f,n,s)},Ne=(a,f)=>{if(!f||!f[a])return!1;var n=(f.altKey?1:0)+(f.ctrlKey?1:0)+(f.shiftKey?1:0)+(f.metaKey?1:0);return n===1},ot=(a,f)=>{let n=a.getAttribute("id");return n||(a.setAttribute("id",f),f)},Tt=a=>a.replace(/[\\"']/g,"\\$&"),Re=(a,f)=>{f&&a.append(f)};function lt(a,f){var n=Object.assign({},Ot,f),s=n.dataAttr,o=n.labelField,u=n.valueField,h=n.disabledField,p=n.optgroupField,w=n.optgroupLabelField,E=n.optgroupValueField,A=a.tagName.toLowerCase(),P=a.getAttribute("placeholder")||a.getAttribute("data-placeholder");if(!P&&!n.allowEmptyOption){let T=a.querySelector('option[value=""]');T&&(P=T.textContent)}var H={placeholder:P,options:[],optgroups:[],items:[],maxItems:null},be=()=>{var T,he=H.options,X={},ae=1,k=Z=>{var Q=Object.assign({},Z.dataset),q=s&&Q[s];return typeof q=="string"&&q.length&&(Q=Object.assign(Q,JSON.parse(q))),Q},ie=(Z,Q)=>{var q=ke(Z.value);if(q!=null&&!(!q&&!n.allowEmptyOption)){if(X.hasOwnProperty(q)){if(Q){var ue=X[q][p];ue?Array.isArray(ue)?ue.push(Q):X[q][p]=[ue,Q]:X[q][p]=Q}}else{var re=k(Z);re[o]=re[o]||Z.textContent,re[u]=re[u]||q,re[h]=re[h]||Z.disabled,re[p]=re[p]||Q,re.$option=Z,X[q]=re,he.push(re)}Z.selected&&H.items.push(q)}},Ie=Z=>{var Q,q;q=k(Z),q[w]=q[w]||Z.getAttribute("label")||"",q[E]=q[E]||ae++,q[h]=q[h]||Z.disabled,H.optgroups.push(q),Q=q[E],je(Z.children,ue=>{ie(ue,Q)})};H.maxItems=a.hasAttribute("multiple")?null:1,je(a.children,Z=>{T=Z.tagName.toLowerCase(),T==="optgroup"?Ie(Z):T==="option"&&ie(Z)})},ye=()=>{let T=a.getAttribute(s);if(T)H.options=JSON.parse(T),je(H.options,X=>{H.items.push(X[u])});else{var he=a.value.trim()||"";if(!n.allowEmptyOption&&!he.length)return;let X=he.split(n.delimiter);je(X,ae=>{let k={};k[o]=ae,k[u]=ae,H.options.push(k)}),H.items=X}};return A==="select"?be():ye(),Object.assign({},Ot,H,f)}var Jt=0,De=class extends mt(Qe){constructor(n,s){super();this.order=0;this.isOpen=!1;this.isDisabled=!1;this.isInvalid=!1;this.isValid=!0;this.isLocked=!1;this.isFocused=!1;this.isInputHidden=!1;this.isSetup=!1;this.ignoreFocus=!1;this.ignoreHover=!1;this.hasOptions=!1;this.lastValue="";this.caretPos=0;this.loading=0;this.loadedSearches={};this.activeOption=null;this.activeItems=[];this.optgroups={};this.options={};this.userOptions={};this.items=[];Jt++;var o,u=_e(n);if(u.tomselect)throw new Error("Tom Select already initialized on this element");u.tomselect=this;var h=window.getComputedStyle&&window.getComputedStyle(u,null);o=h.getPropertyValue("direction");let p=lt(u,s);this.settings=p,this.input=u,this.tabIndex=u.tabIndex||0,this.is_select_tag=u.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(o),this.inputId=ot(u,"tomselect-"+Jt),this.isRequired=u.required,this.sifter=new Fe.Sifter(this.options,{diacritics:p.diacritics}),p.mode=p.mode||(p.maxItems===1?"single":"multi"),typeof p.hideSelected!="boolean"&&(p.hideSelected=p.mode==="multi"),typeof p.hidePlaceholder!="boolean"&&(p.hidePlaceholder=p.mode!=="multi");var w=p.createFilter;typeof w!="function"&&(typeof w=="string"&&(w=new RegExp(w)),w instanceof RegExp?p.createFilter=X=>w.test(X):p.createFilter=X=>this.settings.duplicates||!this.options[X]),this.initializePlugins(p.plugins),this.setupCallbacks(),this.setupTemplates();let E=_e("<div>"),A=_e("<div>"),P=this._render("dropdown"),H=_e('<div role="listbox" tabindex="-1">'),be=this.input.getAttribute("class")||"",ye=p.mode;var T;if(Ee(E,p.wrapperClass,be,ye),Ee(A,p.controlClass),Re(E,A),Ee(P,p.dropdownClass,ye),p.copyClassesToDropdown&&Ee(P,be),Ee(H,p.dropdownContentClass),Re(P,H),_e(p.dropdownParent||E).appendChild(P),_t(p.controlInput)){T=_e(p.controlInput);var he=["autocorrect","autocapitalize","autocomplete"];(0,Fe.iterate)(he,X=>{u.getAttribute(X)&&ce(T,{[X]:u.getAttribute(X)})}),T.tabIndex=-1,A.appendChild(T),this.focus_node=T}else p.controlInput?(T=_e(p.controlInput),this.focus_node=T):(T=_e("<input/>"),this.focus_node=A);this.wrapper=E,this.dropdown=P,this.dropdown_content=H,this.control=A,this.control_input=T,this.setup()}setup(){let n=this,s=n.settings,o=n.control_input,u=n.dropdown,h=n.dropdown_content,p=n.wrapper,w=n.control,E=n.input,A=n.focus_node,P={passive:!0},H=n.inputId+"-ts-dropdown";ce(h,{id:H}),ce(A,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":H});let be=ot(A,n.inputId+"-ts-control"),ye="label[for='"+jt(n.inputId)+"']",T=document.querySelector(ye),he=n.focus.bind(n);if(T){Te(T,"click",he),ce(T,{for:be});let k=ot(T,n.inputId+"-ts-label");ce(A,{"aria-labelledby":k}),ce(h,{"aria-labelledby":k})}if(p.style.width=E.style.width,n.plugins.names.length){let k="plugin-"+n.plugins.names.join(" plugin-");Ee([p,u],k)}(s.maxItems===null||s.maxItems>1)&&n.is_select_tag&&ce(E,{multiple:"multiple"}),s.placeholder&&ce(o,{placeholder:s.placeholder}),!s.splitOn&&s.delimiter&&(s.splitOn=new RegExp("\\s*"+(0,Wt.escape_regex)(s.delimiter)+"+\\s*")),s.load&&s.loadThrottle&&(s.load=Qt(s.load,s.loadThrottle)),n.control_input.type=E.type,Te(u,"mousemove",()=>{n.ignoreHover=!1}),Te(u,"mouseenter",k=>{var ie=rt(k.target,"[data-selectable]",u);ie&&n.onOptionHover(k,ie)},{capture:!0}),Te(u,"click",k=>{let ie=rt(k.target,"[data-selectable]");ie&&(n.onOptionSelect(k,ie),W(k,!0))}),Te(w,"click",k=>{var ie=rt(k.target,"[data-ts-item]",w);if(ie&&n.onItemSelect(k,ie)){W(k,!0);return}o.value==""&&(n.onClick(),W(k,!0))}),Te(A,"keydown",k=>n.onKeyDown(k)),Te(o,"keypress",k=>n.onKeyPress(k)),Te(o,"input",k=>n.onInput(k)),Te(A,"blur",k=>n.onBlur(k)),Te(A,"focus",k=>n.onFocus(k)),Te(o,"paste",k=>n.onPaste(k));let X=k=>{let ie=k.composedPath()[0];if(!p.contains(ie)&&!u.contains(ie)){n.isFocused&&n.blur(),n.inputState();return}ie==o&&n.isOpen?k.stopPropagation():W(k,!0)},ae=()=>{n.isOpen&&n.positionDropdown()};Te(document,"mousedown",X),Te(window,"scroll",ae,P),Te(window,"resize",ae,P),this._destroy=()=>{document.removeEventListener("mousedown",X),window.removeEventListener("scroll",ae),window.removeEventListener("resize",ae),T&&T.removeEventListener("click",he)},this.revertSettings={innerHTML:E.innerHTML,tabIndex:E.tabIndex},E.tabIndex=-1,E.insertAdjacentElement("afterend",n.wrapper),n.sync(!1),s.items=[],delete s.optgroups,delete s.options,Te(E,"invalid",()=>{n.isValid&&(n.isValid=!1,n.isInvalid=!0,n.refreshState())}),n.updateOriginalInput(),n.refreshItems(),n.close(!1),n.inputState(),n.isSetup=!0,E.disabled?n.disable():n.enable(),n.on("change",this.onChange),Ee(E,"tomselected","ts-hidden-accessible"),n.trigger("initialize"),s.preload===!0&&n.preload()}setupOptions(n=[],s=[]){this.addOptions(n),(0,Fe.iterate)(s,o=>{this.registerOptionGroup(o)})}setupTemplates(){var n=this,s=n.settings.labelField,o=n.settings.optgroupLabelField,u={optgroup:h=>{let p=document.createElement("div");return p.className="optgroup",p.appendChild(h.options),p},optgroup_header:(h,p)=>'<div class="optgroup-header">'+p(h[o])+"</div>",option:(h,p)=>"<div>"+p(h[s])+"</div>",item:(h,p)=>"<div>"+p(h[s])+"</div>",option_create:(h,p)=>'<div class="create">Add <strong>'+p(h.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};n.settings.render=Object.assign({},u,n.settings.render)}setupCallbacks(){var n,s,o={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(n in o)s=this.settings[o[n]],s&&this.on(n,s)}sync(n=!0){let s=this,o=n?lt(s.input,{delimiter:s.settings.delimiter}):s.settings;s.setupOptions(o.options,o.optgroups),s.setValue(o.items||[],!0),s.lastQuery=null}onClick(){var n=this;if(n.activeItems.length>0){n.clearActiveItems(),n.focus();return}n.isFocused&&n.isOpen?n.blur():n.focus()}onMouseDown(){}onChange(){it(this.input,"input"),it(this.input,"change")}onPaste(n){var s=this;if(s.isInputHidden||s.isLocked){W(n);return}s.settings.splitOn&&setTimeout(()=>{var o=s.inputValue();if(o.match(s.settings.splitOn)){var u=o.trim().split(s.settings.splitOn);(0,Fe.iterate)(u,h=>{ke(h)&&(this.options[h]?s.addItem(h):s.createItem(h))})}},0)}onKeyPress(n){var s=this;if(s.isLocked){W(n);return}var o=String.fromCharCode(n.keyCode||n.which);if(s.settings.create&&s.settings.mode==="multi"&&o===s.settings.delimiter){s.createItem(),W(n);return}}onKeyDown(n){var s=this;if(s.ignoreHover=!0,s.isLocked){n.keyCode!==9&&W(n);return}switch(n.keyCode){case 65:if(Ne(Je,n)&&s.control_input.value==""){W(n),s.selectAll();return}break;case 27:s.isOpen&&(W(n,!0),s.close()),s.clearActiveItems();return;case 40:if(!s.isOpen&&s.hasOptions)s.open();else if(s.activeOption){let o=s.getAdjacent(s.activeOption,1);o&&s.setActiveOption(o)}W(n);return;case 38:if(s.activeOption){let o=s.getAdjacent(s.activeOption,-1);o&&s.setActiveOption(o)}W(n);return;case 13:s.canSelect(s.activeOption)?(s.onOptionSelect(n,s.activeOption),W(n)):s.settings.create&&s.createItem()?W(n):document.activeElement==s.control_input&&s.isOpen&&W(n);return;case 37:s.advanceSelection(-1,n);return;case 39:s.advanceSelection(1,n);return;case 9:s.settings.selectOnTab&&(s.canSelect(s.activeOption)&&(s.onOptionSelect(n,s.activeOption),W(n)),s.settings.create&&s.createItem()&&W(n));return;case 8:case 46:s.deleteSelection(n);return}s.isInputHidden&&!Ne(Je,n)&&W(n)}onInput(n){var s=this;if(!s.isLocked){var o=s.inputValue();s.lastValue!==o&&(s.lastValue=o,s.settings.shouldLoad.call(s,o)&&s.load(o),s.refreshOptions(),s.trigger("type",o))}}onOptionHover(n,s){this.ignoreHover||this.setActiveOption(s,!1)}onFocus(n){var s=this,o=s.isFocused;if(s.isDisabled){s.blur(),W(n);return}s.ignoreFocus||(s.isFocused=!0,s.settings.preload==="focus"&&s.preload(),o||s.trigger("focus"),s.activeItems.length||(s.showInput(),s.refreshOptions(!!s.settings.openOnFocus)),s.refreshState())}onBlur(n){if(document.hasFocus()!==!1){var s=this;if(s.isFocused){s.isFocused=!1,s.ignoreFocus=!1;var o=()=>{s.close(),s.setActiveItem(),s.setCaret(s.items.length),s.trigger("blur")};s.settings.create&&s.settings.createOnBlur?s.createItem(null,o):o()}}}onOptionSelect(n,s){var o,u=this;s.parentElement&&s.parentElement.matches("[data-disabled]")||(s.classList.contains("create")?u.createItem(null,()=>{u.settings.closeAfterSelect&&u.close()}):(o=s.dataset.value,typeof o<"u"&&(u.lastQuery=null,u.addItem(o),u.settings.closeAfterSelect&&u.close(),!u.settings.hideSelected&&n.type&&/click/.test(n.type)&&u.setActiveOption(s))))}canSelect(n){return!!(this.isOpen&&n&&this.dropdown_content.contains(n))}onItemSelect(n,s){var o=this;return!o.isLocked&&o.settings.mode==="multi"?(W(n),o.setActiveItem(s,n),!0):!1}canLoad(n){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(n))}load(n){let s=this;if(!s.canLoad(n))return;Ee(s.wrapper,s.settings.loadingClass),s.loading++;let o=s.loadCallback.bind(s);s.settings.load.call(s,n,o)}loadCallback(n,s){let o=this;o.loading=Math.max(o.loading-1,0),o.lastQuery=null,o.clearActiveOption(),o.setupOptions(n,s),o.refreshOptions(o.isFocused&&!o.isInputHidden),o.loading||Ve(o.wrapper,o.settings.loadingClass),o.trigger("load",n,s)}preload(){var n=this.wrapper.classList;n.contains("preloaded")||(n.add("preloaded"),this.load(""))}setTextboxValue(n=""){var s=this.control_input,o=s.value!==n;o&&(s.value=n,it(s,"update"),this.lastValue=n)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(n,s){var o=s?[]:["change"];wt(this,o,()=>{this.clear(s),this.addItems(n,s)})}setMaxItems(n){n===0&&(n=null),this.settings.maxItems=n,this.refreshState()}setActiveItem(n,s){var o=this,u,h,p,w,E,A;if(o.settings.mode!=="single"){if(!n){o.clearActiveItems(),o.isFocused&&o.showInput();return}if(u=s&&s.type.toLowerCase(),u==="click"&&Ne("shiftKey",s)&&o.activeItems.length){for(A=o.getLastActive(),p=Array.prototype.indexOf.call(o.control.children,A),w=Array.prototype.indexOf.call(o.control.children,n),p>w&&(E=p,p=w,w=E),h=p;h<=w;h++)n=o.control.children[h],o.activeItems.indexOf(n)===-1&&o.setActiveItemClass(n);W(s)}else u==="click"&&Ne(Je,s)||u==="keydown"&&Ne("shiftKey",s)?n.classList.contains("active")?o.removeActiveItem(n):o.setActiveItemClass(n):(o.clearActiveItems(),o.setActiveItemClass(n));o.hideInput(),o.isFocused||o.focus()}}setActiveItemClass(n){let s=this,o=s.control.querySelector(".last-active");o&&Ve(o,"last-active"),Ee(n,"active last-active"),s.trigger("item_select",n),s.activeItems.indexOf(n)==-1&&s.activeItems.push(n)}removeActiveItem(n){var s=this.activeItems.indexOf(n);this.activeItems.splice(s,1),Ve(n,"active")}clearActiveItems(){Ve(this.activeItems,"active"),this.activeItems=[]}setActiveOption(n,s=!0){n!==this.activeOption&&(this.clearActiveOption(),n&&(this.activeOption=n,ce(this.focus_node,{"aria-activedescendant":n.getAttribute("id")}),ce(n,{"aria-selected":"true"}),Ee(n,"active"),s&&this.scrollToOption(n)))}scrollToOption(n,s){if(!n)return;let o=this.dropdown_content,u=o.clientHeight,h=o.scrollTop||0,p=n.offsetHeight,w=n.getBoundingClientRect().top-o.getBoundingClientRect().top+h;w+p>u+h?this.scroll(w-u+p,s):w<h&&this.scroll(w,s)}scroll(n,s){let o=this.dropdown_content;s&&(o.style.scrollBehavior=s),o.scrollTop=n,o.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(Ve(this.activeOption,"active"),ce(this.activeOption,{"aria-selected":null})),this.activeOption=null,ce(this.focus_node,{"aria-activedescendant":null})}selectAll(){let n=this;if(n.settings.mode==="single")return;let s=n.controlChildren();s.length&&(n.hideInput(),n.close(),n.activeItems=s,(0,Fe.iterate)(s,o=>{n.setActiveItemClass(o)}))}inputState(){var n=this;n.control.contains(n.control_input)&&(ce(n.control_input,{placeholder:n.settings.placeholder}),n.activeItems.length>0||!n.isFocused&&n.settings.hidePlaceholder&&n.items.length>0?(n.setTextboxValue(),n.isInputHidden=!0):(n.settings.hidePlaceholder&&n.items.length>0&&ce(n.control_input,{placeholder:""}),n.isInputHidden=!1),n.wrapper.classList.toggle("input-hidden",n.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var n=this;n.isDisabled||(n.ignoreFocus=!0,n.control_input.offsetWidth?n.control_input.focus():n.focus_node.focus(),setTimeout(()=>{n.ignoreFocus=!1,n.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(n){return this.sifter.getScoreFunction(n,this.getSearchOptions())}getSearchOptions(){var n=this.settings,s=n.sortField;return typeof n.sortField=="string"&&(s=[{field:n.sortField}]),{fields:n.searchField,conjunction:n.searchConjunction,sort:s,nesting:n.nesting}}search(n){var s,o,u=this,h=this.getSearchOptions();if(u.settings.score&&(o=u.settings.score.call(u,n),typeof o!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return n!==u.lastQuery?(u.lastQuery=n,s=u.sifter.search(n,Object.assign(h,{score:o})),u.currentResults=s):s=Object.assign({},u.currentResults),u.settings.hideSelected&&(s.items=s.items.filter(p=>{let w=ke(p.id);return!(w&&u.items.indexOf(w)!==-1)})),s}refreshOptions(n=!0){var s,o,u,h,p,w,E,A,P,H;let be={},ye=[];var T=this,he=T.inputValue();let X=he===T.lastQuery||he==""&&T.lastQuery==null;var ae=T.search(he),k=null,ie=T.settings.shouldOpen||!1,Ie=T.dropdown_content;for(X&&(k=T.activeOption,k&&(P=k.closest("[data-group]"))),h=ae.items.length,typeof T.settings.maxOptions=="number"&&(h=Math.min(h,T.settings.maxOptions)),h>0&&(ie=!0),s=0;s<h;s++){let Q=ae.items[s];if(!Q)continue;let q=Q.id,ue=T.options[q];if(ue===void 0)continue;let re=We(q),Se=T.getOption(re,!0);for(T.settings.hideSelected||Se.classList.toggle("selected",T.items.includes(re)),p=ue[T.settings.optgroupField]||"",w=Array.isArray(p)?p:[p],o=0,u=w&&w.length;o<u;o++){p=w[o],T.optgroups.hasOwnProperty(p)||(p="");let xe=be[p];xe===void 0&&(xe=document.createDocumentFragment(),ye.push(p)),o>0&&(Se=Se.cloneNode(!0),ce(Se,{id:ue.$id+"-clone-"+o,"aria-selected":null}),Se.classList.add("ts-cloned"),Ve(Se,"active"),T.activeOption&&T.activeOption.dataset.value==q&&P&&P.dataset.group===p.toString()&&(k=Se)),xe.appendChild(Se),be[p]=xe}}T.settings.lockOptgroupOrder&&ye.sort((Q,q)=>{let ue=T.optgroups[Q],re=T.optgroups[q],Se=ue&&ue.$order||0,xe=re&&re.$order||0;return Se-xe}),E=document.createDocumentFragment(),(0,Fe.iterate)(ye,Q=>{let q=be[Q];if(!q||!q.children.length)return;let ue=T.optgroups[Q];if(ue!==void 0){let re=document.createDocumentFragment(),Se=T.render("optgroup_header",ue);Re(re,Se),Re(re,q);let xe=T.render("optgroup",{group:ue,options:re});Re(E,xe)}else Re(E,q)}),Ie.innerHTML="",Re(Ie,E),T.settings.highlight&&(Bt(Ie),ae.query.length&&ae.tokens.length&&(0,Fe.iterate)(ae.tokens,Q=>{zt(Ie,Q.regex)}));var Z=Q=>{let q=T.render(Q,{input:he});return q&&(ie=!0,Ie.insertBefore(q,Ie.firstChild)),q};if(T.loading?Z("loading"):T.settings.shouldLoad.call(T,he)?ae.items.length===0&&Z("no_results"):Z("not_loading"),A=T.canCreate(he),A&&(H=Z("option_create")),T.hasOptions=ae.items.length>0||A,ie){if(ae.items.length>0){if(!k&&T.settings.mode==="single"&&T.items[0]!=null&&(k=T.getOption(T.items[0])),!Ie.contains(k)){let Q=0;H&&!T.settings.addPrecedence&&(Q=1),k=T.selectable()[Q]}}else H&&(k=H);n&&!T.isOpen&&(T.open(),T.scrollToOption(k,"auto")),T.setActiveOption(k)}else T.clearActiveOption(),n&&T.isOpen&&T.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(n,s=!1){let o=this;if(Array.isArray(n))return o.addOptions(n,s),!1;let u=ke(n[o.settings.valueField]);return u===null||o.options.hasOwnProperty(u)?!1:(n.$order=n.$order||++o.order,n.$id=o.inputId+"-opt-"+n.$order,o.options[u]=n,o.lastQuery=null,s&&(o.userOptions[u]=s,o.trigger("option_add",u,n)),u)}addOptions(n,s=!1){(0,Fe.iterate)(n,o=>{this.addOption(o,s)})}registerOption(n){return this.addOption(n)}registerOptionGroup(n){var s=ke(n[this.settings.optgroupValueField]);return s===null?!1:(n.$order=n.$order||++this.order,this.optgroups[s]=n,s)}addOptionGroup(n,s){var o;s[this.settings.optgroupValueField]=n,(o=this.registerOptionGroup(s))&&this.trigger("optgroup_add",o,s)}removeOptionGroup(n){this.optgroups.hasOwnProperty(n)&&(delete this.optgroups[n],this.clearCache(),this.trigger("optgroup_remove",n))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(n,s){let o=this;var u,h;let p=ke(n),w=ke(s[o.settings.valueField]);if(p===null)return;let E=o.options[p];if(E==null)return;if(typeof w!="string")throw new Error("Value must be set in option data");let A=o.getOption(p),P=o.getItem(p);if(s.$order=s.$order||E.$order,delete o.options[p],o.uncacheValue(w),o.options[w]=s,A){if(o.dropdown_content.contains(A)){let H=o._render("option",s);Ge(A,H),o.activeOption===A&&o.setActiveOption(H)}A.remove()}P&&(h=o.items.indexOf(p),h!==-1&&o.items.splice(h,1,w),u=o._render("item",s),P.classList.contains("active")&&Ee(u,"active"),Ge(P,u)),o.lastQuery=null}removeOption(n,s){let o=this;n=We(n),o.uncacheValue(n),delete o.userOptions[n],delete o.options[n],o.lastQuery=null,o.trigger("option_remove",n),o.removeItem(n,s)}clearOptions(n){let s=(n||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let o={};(0,Fe.iterate)(this.options,(u,h)=>{s(u,h)&&(o[h]=u)}),this.options=this.sifter.items=o,this.lastQuery=null,this.trigger("option_clear")}clearFilter(n,s){return this.items.indexOf(s)>=0}getOption(n,s=!1){let o=ke(n);if(o===null)return null;let u=this.options[o];if(u!=null){if(u.$div)return u.$div;if(s)return this._render("option",u)}return null}getAdjacent(n,s,o="option"){var u=this,h;if(!n)return null;o=="item"?h=u.controlChildren():h=u.dropdown_content.querySelectorAll("[data-selectable]");for(let p=0;p<h.length;p++)if(h[p]==n)return s>0?h[p+1]:h[p-1];return null}getItem(n){if(typeof n=="object")return n;var s=ke(n);return s!==null?this.control.querySelector(`[data-value="${Tt(s)}"]`):null}addItems(n,s){var o=this,u=Array.isArray(n)?n:[n];u=u.filter(p=>o.items.indexOf(p)===-1);let h=u[u.length-1];u.forEach(p=>{o.isPending=p!==h,o.addItem(p,s)})}addItem(n,s){var o=s?[]:["change","dropdown_close"];wt(this,o,()=>{var u,h;let p=this,w=p.settings.mode,E=ke(n);if(!(E&&p.items.indexOf(E)!==-1&&(w==="single"&&p.close(),w==="single"||!p.settings.duplicates))&&!(E===null||!p.options.hasOwnProperty(E))&&(w==="single"&&p.clear(s),!(w==="multi"&&p.isFull()))){if(u=p._render("item",p.options[E]),p.control.contains(u)&&(u=u.cloneNode(!0)),h=p.isFull(),p.items.splice(p.caretPos,0,E),p.insertAtCaret(u),p.isSetup){if(!p.isPending&&p.settings.hideSelected){let A=p.getOption(E),P=p.getAdjacent(A,1);P&&p.setActiveOption(P)}!p.isPending&&!p.settings.closeAfterSelect&&p.refreshOptions(p.isFocused&&w!=="single"),p.settings.closeAfterSelect!=!1&&p.isFull()?p.close():p.isPending||p.positionDropdown(),p.trigger("item_add",E,u),p.isPending||p.updateOriginalInput({silent:s})}(!p.isPending||!h&&p.isFull())&&(p.inputState(),p.refreshState())}})}removeItem(n=null,s){let o=this;if(n=o.getItem(n),!n)return;var u,h;let p=n.dataset.value;u=yt(n),n.remove(),n.classList.contains("active")&&(h=o.activeItems.indexOf(n),o.activeItems.splice(h,1),Ve(n,"active")),o.items.splice(u,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(p)&&o.removeOption(p,s),u<o.caretPos&&o.setCaret(o.caretPos-1),o.updateOriginalInput({silent:s}),o.refreshState(),o.positionDropdown(),o.trigger("item_remove",p,n)}createItem(n=null,s=()=>{}){arguments.length===3&&(s=arguments[2]),typeof s!="function"&&(s=()=>{});var o=this,u=o.caretPos,h;if(n=n||o.inputValue(),!o.canCreate(n))return s(),!1;o.lock();var p=!1,w=E=>{if(o.unlock(),!E||typeof E!="object")return s();var A=ke(E[o.settings.valueField]);if(typeof A!="string")return s();o.setTextboxValue(),o.addOption(E,!0),o.setCaret(u),o.addItem(A),s(E),p=!0};return typeof o.settings.create=="function"?h=o.settings.create.call(this,n,w):h={[o.settings.labelField]:n,[o.settings.valueField]:n},p||w(h),!0}refreshItems(){var n=this;n.lastQuery=null,n.isSetup&&n.addItems(n.items),n.updateOriginalInput(),n.refreshState()}refreshState(){let n=this;n.refreshValidityState();let s=n.isFull(),o=n.isLocked;n.wrapper.classList.toggle("rtl",n.rtl);let u=n.wrapper.classList;u.toggle("focus",n.isFocused),u.toggle("disabled",n.isDisabled),u.toggle("required",n.isRequired),u.toggle("invalid",!n.isValid),u.toggle("locked",o),u.toggle("full",s),u.toggle("input-active",n.isFocused&&!n.isInputHidden),u.toggle("dropdown-active",n.isOpen),u.toggle("has-options",qt(n.options)),u.toggle("has-items",n.items.length>0)}refreshValidityState(){var n=this;n.input.validity&&(n.isValid=n.input.validity.valid,n.isInvalid=!n.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(n={}){let s=this;var o,u;let h=s.input.querySelector('option[value=""]');if(s.is_select_tag){let E=function(A,P,H){return A||(A=_e('<option value="'+Ye(P)+'">'+Ye(H)+"</option>")),A!=h&&s.input.append(A),p.push(A),(A!=h||w>0)&&(A.selected=!0),A},p=[],w=s.input.querySelectorAll("option:checked").length;s.input.querySelectorAll("option:checked").forEach(A=>{A.selected=!1}),s.items.length==0&&s.settings.mode=="single"?E(h,"",""):s.items.forEach(A=>{if(o=s.options[A],u=o[s.settings.labelField]||"",p.includes(o.$option)){let P=s.input.querySelector(`option[value="${Tt(A)}"]:not(:checked)`);E(P,A,u)}else o.$option=E(o.$option,A,u)})}else s.input.value=s.getValue();s.isSetup&&(n.silent||s.trigger("change",s.getValue()))}open(){var n=this;n.isLocked||n.isOpen||n.settings.mode==="multi"&&n.isFull()||(n.isOpen=!0,ce(n.focus_node,{"aria-expanded":"true"}),n.refreshState(),Ue(n.dropdown,{visibility:"hidden",display:"block"}),n.positionDropdown(),Ue(n.dropdown,{visibility:"visible",display:"block"}),n.focus(),n.trigger("dropdown_open",n.dropdown))}close(n=!0){var s=this,o=s.isOpen;n&&(s.setTextboxValue(),s.settings.mode==="single"&&s.items.length&&s.hideInput()),s.isOpen=!1,ce(s.focus_node,{"aria-expanded":"false"}),Ue(s.dropdown,{display:"none"}),s.settings.hideSelected&&s.clearActiveOption(),s.refreshState(),o&&s.trigger("dropdown_close",s.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var n=this.control,s=n.getBoundingClientRect(),o=n.offsetHeight+s.top+window.scrollY,u=s.left+window.scrollX;Ue(this.dropdown,{width:s.width+"px",top:o+"px",left:u+"px"})}}clear(n){var s=this;if(s.items.length){var o=s.controlChildren();(0,Fe.iterate)(o,u=>{s.removeItem(u,!0)}),s.showInput(),n||s.updateOriginalInput(),s.trigger("clear")}}insertAtCaret(n){let s=this,o=s.caretPos,u=s.control;u.insertBefore(n,u.children[o]||null),s.setCaret(o+1)}deleteSelection(n){var s,o,u,h,p=this;s=n&&n.keyCode===8?-1:1,o=Ut(p.control_input);let w=[];if(p.activeItems.length)h=bt(p.activeItems,s),u=yt(h),s>0&&u++,(0,Fe.iterate)(p.activeItems,E=>w.push(E));else if((p.isFocused||p.settings.mode==="single")&&p.items.length){let E=p.controlChildren(),A;s<0&&o.start===0&&o.length===0?A=E[p.caretPos-1]:s>0&&o.start===p.inputValue().length&&(A=E[p.caretPos]),A!==void 0&&w.push(A)}if(!p.shouldDelete(w,n))return!1;for(W(n,!0),typeof u<"u"&&p.setCaret(u);w.length;)p.removeItem(w.pop());return p.showInput(),p.positionDropdown(),p.refreshOptions(!1),!0}shouldDelete(n,s){let o=n.map(u=>u.dataset.value);return!(!o.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(o,s)===!1)}advanceSelection(n,s){var o,u,h=this;h.rtl&&(n*=-1),!h.inputValue().length&&(Ne(Je,s)||Ne("shiftKey",s)?(o=h.getLastActive(n),o?o.classList.contains("active")?u=h.getAdjacent(o,n,"item"):u=o:n>0?u=h.control_input.nextElementSibling:u=h.control_input.previousElementSibling,u&&(u.classList.contains("active")&&h.removeActiveItem(o),h.setActiveItemClass(u))):h.moveCaret(n))}moveCaret(n){}getLastActive(n){let s=this.control.querySelector(".last-active");if(s)return s;var o=this.control.querySelectorAll(".active");if(o)return bt(o,n)}setCaret(n){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var n=this;n.input.disabled=!0,n.control_input.disabled=!0,n.focus_node.tabIndex=-1,n.isDisabled=!0,this.close(),n.lock()}enable(){var n=this;n.input.disabled=!1,n.control_input.disabled=!1,n.focus_node.tabIndex=n.tabIndex,n.isDisabled=!1,n.unlock()}destroy(){var n=this,s=n.revertSettings;n.trigger("destroy"),n.off(),n.wrapper.remove(),n.dropdown.remove(),n.input.innerHTML=s.innerHTML,n.input.tabIndex=s.tabIndex,Ve(n.input,"tomselected","ts-hidden-accessible"),n._destroy(),delete n.input.tomselect}render(n,s){var o,u;let h=this;if(typeof this.settings.render[n]!="function"||(u=h.settings.render[n].call(this,s,Ye),!u))return null;if(u=_e(u),n==="option"||n==="option_create"?s[h.settings.disabledField]?ce(u,{"aria-disabled":"true"}):ce(u,{"data-selectable":""}):n==="optgroup"&&(o=s.group[h.settings.optgroupValueField],ce(u,{"data-group":o}),s.group[h.settings.disabledField]&&ce(u,{"data-disabled":""})),n==="option"||n==="item"){let p=We(s[h.settings.valueField]);ce(u,{"data-value":p}),n==="item"?(Ee(u,h.settings.itemClass),ce(u,{"data-ts-item":""})):(Ee(u,h.settings.optionClass),ce(u,{role:"option",id:s.$id}),s.$div=u,h.options[p]=s)}return u}_render(n,s){let o=this.render(n,s);if(o==null)throw"HTMLElement expected";return o}clearCache(){(0,Fe.iterate)(this.options,n=>{n.$div&&(n.$div.remove(),delete n.$div)})}uncacheValue(n){let s=this.getOption(n);s&&s.remove()}canCreate(n){return this.settings.create&&n.length>0&&this.settings.createFilter.call(this,n)}hook(n,s,o){var u=this,h=u[s];u[s]=function(){var p,w;return n==="after"&&(p=h.apply(u,arguments)),w=o.apply(u,arguments),n==="instead"?w:(n==="before"&&(p=h.apply(u,arguments)),p)}}};function Xt(){var a=this,f=a.onOptionSelect;a.settings.hideSelected=!1;var n=function(s){setTimeout(()=>{var o=s.querySelector("input");o instanceof HTMLInputElement&&(s.classList.contains("selected")?o.checked=!0:o.checked=!1)},1)};a.hook("after","setupTemplates",()=>{var s=a.settings.render.option;a.settings.render.option=(o,u)=>{var h=_e(s.call(a,o,u)),p=document.createElement("input");p.addEventListener("click",function(E){W(E)}),p.type="checkbox";let w=ke(o[a.settings.valueField]);return w&&a.items.indexOf(w)>-1&&(p.checked=!0),h.prepend(p),h}}),a.on("item_remove",s=>{var o=a.getOption(s);o&&(o.classList.remove("selected"),n(o))}),a.on("item_add",s=>{var o=a.getOption(s);o&&n(o)}),a.hook("instead","onOptionSelect",(s,o)=>{if(o.classList.contains("selected")){o.classList.remove("selected"),a.removeItem(o.dataset.value),a.refreshOptions(),W(s,!0);return}f.call(a,s,o),n(o)})}function Zt(a){let f=this,n=Object.assign({className:"clear-button",title:"Clear All",html:s=>`<div class="${s.className}" title="${s.title}">&#10799;</div>`},a);f.on("initialize",()=>{var s=_e(n.html(n));s.addEventListener("click",o=>{f.isDisabled||(f.clear(),f.settings.mode==="single"&&f.settings.allowEmptyOption&&f.addItem(""),o.preventDefault(),o.stopPropagation())}),f.control.appendChild(s)})}function en(a){let f=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:s=>'<div class="'+s.headerClass+'"><div class="'+s.titleRowClass+'"><span class="'+s.labelClass+'">'+s.title+'</span><a class="'+s.closeClass+'">&times;</a></div></div>'},a);f.on("initialize",()=>{var s=_e(n.html(n)),o=s.querySelector("."+n.closeClass);o&&o.addEventListener("click",u=>{W(u,!0),f.close()}),f.dropdown.insertBefore(s,f.dropdown.firstChild)})}function tn(){let a=this;a.settings.shouldOpen=!0,a.hook("before","setup",()=>{a.focus_node=a.control,Ee(a.control_input,"dropdown-input");let f=_e('<div class="dropdown-input-wrap">');f.append(a.control_input),a.dropdown.insertBefore(f,a.dropdown.firstChild);let n=_e('<input class="items-placeholder" tabindex="-1" />');n.placeholder=a.settings.placeholder||"",a.control.append(n)}),a.on("initialize",()=>{a.control_input.addEventListener("keydown",n=>{switch(n.keyCode){case 27:a.isOpen&&(W(n,!0),a.close()),a.clearActiveItems();return;case 9:a.focus_node.tabIndex=-1;break}return a.onKeyDown.call(a,n)}),a.on("blur",()=>{a.focus_node.tabIndex=a.isDisabled?-1:a.tabIndex}),a.on("dropdown_open",()=>{a.control_input.focus()});let f=a.onBlur;a.hook("instead","onBlur",n=>{if(!(n&&n.relatedTarget==a.control_input))return f.call(a)}),Te(a.control_input,"blur",()=>a.onBlur()),a.hook("before","close",()=>{a.isOpen&&a.focus_node.focus({preventScroll:!0})})})}function nn(a){let f=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},a);var n=this;if(f.append){var s='<a href="javascript:void(0)" class="'+f.className+'" tabindex="-1" title="'+Ye(f.title)+'">'+f.label+"</a>";n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(u,h)=>{var p=_e(o.call(n,u,h)),w=_e(s);return p.appendChild(w),Te(w,"mousedown",E=>{W(E,!0)}),Te(w,"click",E=>{W(E,!0),!n.isLocked&&n.shouldDelete([p],E)&&(n.removeItem(p),n.refreshOptions(!1),n.inputState())}),p}})}}function sn(){let a=this,f=a.canLoad,n=a.clearActiveOption,s=a.loadCallback;var o={},u,h=!1,p,w=[];if(a.settings.shouldLoadMore||(a.settings.shouldLoadMore=()=>{if(u.clientHeight/(u.scrollHeight-u.scrollTop)>.9)return!0;if(a.activeOption){var H=a.selectable(),be=Array.from(H).indexOf(a.activeOption);if(be>=H.length-2)return!0}return!1}),!a.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";a.settings.sortField=[{field:"$order"},{field:"$score"}];let E=P=>typeof a.settings.maxOptions=="number"&&u.children.length>=a.settings.maxOptions?!1:!!(P in o&&o[P]),A=(P,H)=>a.items.indexOf(H)>=0||w.indexOf(H)>=0;a.setNextUrl=(P,H)=>{o[P]=H},a.getUrl=P=>{if(P in o){let H=o[P];return o[P]=!1,H}return o={},a.settings.firstUrl.call(a,P)},a.hook("instead","clearActiveOption",()=>{if(!h)return n.call(a)}),a.hook("instead","canLoad",P=>P in o?E(P):f.call(a,P)),a.hook("instead","loadCallback",(P,H)=>{if(!h)a.clearOptions(A);else if(p){let be=P[0];be!==void 0&&(p.dataset.value=be[a.settings.valueField])}s.call(a,P,H),h=!1}),a.hook("after","refreshOptions",()=>{let P=a.lastValue;var H;E(P)?(H=a.render("loading_more",{query:P}),H&&(H.setAttribute("data-selectable",""),p=H)):P in o&&!u.querySelector(".no-results")&&(H=a.render("no_more_results",{query:P})),H&&(Ee(H,a.settings.optionClass),u.append(H))}),a.on("initialize",()=>{w=Object.keys(a.options),u=a.dropdown_content,a.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},a.settings.render),u.addEventListener("scroll",()=>{a.settings.shouldLoadMore.call(a)&&E(a.lastValue)&&(h||(h=!0,a.load.call(a,a.lastValue)))})})}De.define("checkbox_options",Xt);De.define("clear_button",Zt);De.define("dropdown_header",en);De.define("dropdown_input",tn);De.define("remove_button",nn);De.define("virtual_scroll",sn);window.TomSelect=rn();})();
/*! Bundled license information:

@orchidjs/sifter/dist/umd/sifter.js:
  (*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) *)
  (*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) *)

@orchidjs/unicode-variants/dist/umd/index.js:
  (*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) *)

tom-select/dist/js/tom-select.complete.js:
  (*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) *)
  (*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) *)
*/
//# sourceMappingURL=django-tomselect.min.js.map
